

Processing Rails::InfoController#properties (for 127.0.0.1 at 2009-08-07 14:47:21) [GET]
  [4;36;1mSQL (0.9ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
Completed in 136ms (View: 10, DB: 1) | 200 OK [http://localhost/rails/info/properties]
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mselect sqlite_version(*)[0m
  [4;36;1mSQL (8.5ms)[0m   [0;1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [4;35;1mSQL (6.1ms)[0m   [0mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookings (20090807134934)
  [4;36;1mSQL (0.4ms)[0m   [0;1mCREATE TABLE "bookings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "arrival" date, "departure" date, "created_at" datetime, "updated_at" datetime) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090807134934')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m


Processing BookingsController#index (for 127.0.0.1 at 2009-08-07 14:50:41) [GET]
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/bookings
Rendering bookings/index
Completed in 23ms (View: 17, DB: 0) | 200 OK [http://localhost/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-07 14:51:00) [GET]
Rendering template within layouts/bookings
Rendering bookings/new
Completed in 85ms (View: 78, DB: 0) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-07 14:51:56) [GET]
Rendering template within layouts/bookings
Rendering bookings/new
Completed in 38ms (View: 21, DB: 0) | 200 OK [http://localhost/bookings/new]
  [4;36;1mSQL (0.5ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookings (20090807134934)
Migrating to CreateBookingItems (20090807141237)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "booking_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "booking_id" integer, "item_price_id" integer, "quantity" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807141237')[0m
Migrating to CreatePricedItems (20090807141552)
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "priced_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "item_type_id" integer, "price" decimal, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807141552')[0m
Migrating to CreateItemTypes (20090807142132)
  [4;35;1mSQL (0.4ms)[0m   [0mCREATE TABLE "item_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "total" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807142132')[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("item_types")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("priced_items")[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m


Processing BookingsController#index (for 127.0.0.1 at 2009-08-07 15:38:29) [GET]
  [4;36;1mBooking Load (1.1ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/bookings
Rendering bookings/index
Completed in 39ms (View: 3, DB: 1) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 15:52:35) [GET]

ActionController::RoutingError (No route matches "/admin" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 15:52:41) [GET]

ActionController::RoutingError (No route matches "/admin/item_type" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#show (for 127.0.0.1 at 2009-08-07 15:55:40) [GET]
  Parameters: {"id"=>"item_type"}

NameError (uninitialized constant AdminController):
  

Rendered rescues/_trace (102.2ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypeController#index (for 127.0.0.1 at 2009-08-07 15:57:06) [GET]
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering admin/item_type/index
Completed in 13ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/item_type]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 15:57:09) [GET]

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (43.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#show (for 127.0.0.1 at 2009-08-07 15:58:05) [GET]
  Parameters: {"id"=>"index"}

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (37.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#show (for 127.0.0.1 at 2009-08-07 15:58:13) [GET]
  Parameters: {"id"=>"show"}

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (47.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#show (for 127.0.0.1 at 2009-08-07 16:14:51) [GET]
  Parameters: {"id"=>"show"}

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#show (for 127.0.0.1 at 2009-08-07 16:15:05) [GET]
  Parameters: {"id"=>"index"}

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (72.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:15:09) [GET]

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (79.2ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:17:32) [GET]

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (33.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:20:43) [GET]

NameError (uninitialized constant Admin::ItemTypesController):
  

Rendered rescues/_trace (32.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:21:38) [GET]

ActionController::RoutingError (No route matches "/admin/item_types/" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:21:58) [GET]

ActionController::RoutingError (No route matches "/admin/item_types/" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing Admin::ItemTypeController#index (for 127.0.0.1 at 2009-08-07 16:22:02) [GET]
  [4;36;1mItemType Load (1.2ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering admin/item_type/index
Completed in 20ms (View: 2, DB: 1) | 200 OK [http://localhost/admin/item_type]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:22:13) [GET]

ActionController::RoutingError (No route matches "/booking" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 16:29:10) [GET]

ActionController::RoutingError (No route matches "/admin/item_types" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 16:29:20) [GET]
  [4;35;1mItemType Load (1.1ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering admin/item_types/index
Completed in 96ms (View: 17, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 16:29:27) [GET]
  Parameters: {"id"=>"show"}
  [4;36;1mItemType Load (0.1ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find ItemType with ID=show):
  app/controllers/admin/item_types_controller.rb:17:in `show'

Rendered rescues/_trace (47.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (not_found)


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 16:29:34) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (0.2ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActiveRecord::RecordNotFound (Couldn't find ItemType with ID=1):
  app/controllers/admin/item_types_controller.rb:17:in `show'

Rendered rescues/_trace (39.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 16:37:53) [GET]
  [4;36;1mItemType Load (1.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering admin/item_types/index

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #9 of app/views/admin/item_types/index.html.erb:
6:     <th>Total</th>
7:   </tr>
8: 
9: <% @item_type.each do |item_type| %>
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>

    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (114.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 16:38:30) [GET]
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering admin/item_types/index

ActionView::TemplateError (undefined local variable or method `new_item_type_path' for #<ActionView::Base:0xb61142a0>) on line #22 of app/views/admin/item_types/index.html.erb:
19: 
20: <br />
21: 
22: <%= link_to 'New item type', new_item_type_path %>

    app/views/admin/item_types/index.html.erb:22
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (46.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 16:41:12) [GET]
  [4;36;1mItemType Load (1.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering admin/item_types/index
Completed in 38ms (View: 10, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-07 16:41:37) [GET]
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/bookings
Rendering bookings/index
Completed in 11ms (View: 2, DB: 1) | 200 OK [http://localhost/]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-07 16:42:09) [GET]
  [4;36;1mBooking Load (1.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 34ms (View: 17, DB: 1) | 200 OK [http://localhost/]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 16:42:14) [GET]
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 11ms (View: 2, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:42:30) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Completed in 39ms (View: 10, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:43:01) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Completed in 24ms (View: 3, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:45:00) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@itemtype) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (50.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:45:09) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@itemtype) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (155.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:46:04) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb60cb410>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (49.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 16:46:44) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb5f79fe4>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (54.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:42:10) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb6094f50>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (49.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:42:29) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@admin_item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (51.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:42:45) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb606fd40>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@admin_item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (54.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:43:33) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Completed in 30ms (View: 10, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:43:47) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb6175f3c>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(@item_type) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (63.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:45:24) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `text_box' for #<ActionView::Helpers::FormBuilder:0xb5ffecd0>) on line #8 of app/views/admin/item_types/new.html.erb:
5: 
6:   <p>
7:     <%= f.label :name %><br />
8:     <%= f.text_box :name %>
9:   </p>
10:   <p>
11:     <%= f.label :total %><br />

    app/views/admin/item_types/new.html.erb:8
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (124.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:46:09) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb613e7e4>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for(ItemType) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (50.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:46:17) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `text_box' for #<ActionView::Helpers::FormBuilder:0xb5fcb948>) on line #8 of app/views/admin/item_types/new.html.erb:
5: 
6:   <p>
7:     <%= f.label :name %><br />
8:     <%= f.text_box :name %>
9:   </p>
10:   <p>
11:     <%= f.label :total %><br />

    app/views/admin/item_types/new.html.erb:8
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (147.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:52:45) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `text_box' for #<ActionView::Helpers::FormBuilder:0xb6093d08>) on line #8 of app/views/admin/item_types/new.html.erb:
5: 
6:   <p>
7:     <%= f.label :name %><br />
8:     <%= f.text_box :name %>
9:   </p>
10:   <p>
11:     <%= f.label :total %><br />

    app/views/admin/item_types/new.html.erb:8
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (55.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:53:08) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `text_box' for #<ActionView::Helpers::FormBuilder:0xb5f43d2c>) on line #8 of app/views/admin/item_types/new.html.erb:
5: 
6:   <p>
7:     <%= f.label :name %><br />
8:     <%= f.text_box :name %>
9:   </p>
10:   <p>
11:     <%= f.label :total %><br />

    app/views/admin/item_types/new.html.erb:8
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (57.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:54:01) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Completed in 46ms (View: 26, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:54:24) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `item_types_path' for #<ActionView::Base:0xb601d324>) on line #3 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for([@item_type]) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (58.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 17:54:30) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Completed in 16ms (View: 7, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 17:54:32) [GET]
  [4;36;1mItemType Load (1.1ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 31ms (View: 12, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 17:54:44) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (1.1ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 16:54:44', '2009-08-07 16:54:44', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60c2bd0>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (73.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 18:08:45) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined method `include?' for :form:Symbol) on line #4 of app/views/admin/item_types/new.html.erb:
1: <h1>New item type</h1>
2: 
3: <% form_for([:admin, @item_type]) do |f| %>
4:   <%= render :partial => :form, :local => { :f => f, :button_text => "Create" } %>
5: <% end %>
6: 
7: <%= link_to 'Back', admin_item_types_path %>

    app/views/admin/item_types/new.html.erb:4
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (116.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 18:09:15) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined local variable or method `f' for #<ActionView::Base:0xb60c8cc4>) on line #1 of app/views/admin/item_types/_form.html.erb:
1:   <%= f.error_messages %>
2: 
3:   <p>
4:     <%= f.label :name %><br />

    app/views/admin/item_types/_form.html.erb:1
    app/views/admin/item_types/new.html.erb:4
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (62.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 18:09:33) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new

ActionView::TemplateError (undefined local variable or method `f' for #<ActionView::Base:0xb5f36d70>) on line #1 of app/views/admin/item_types/_form.html.erb:
1:   <%= f.error_messages %>
2: 
3:   <p>
4:     <%= f.label :name %><br />

    app/views/admin/item_types/_form.html.erb:1
    app/views/admin/item_types/new.html.erb:4
    app/views/admin/item_types/new.html.erb:3
    app/controllers/admin/item_types_controller.rb:30:in `new'

Rendered rescues/_trace (61.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 18:09:56) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (6.1ms)
Completed in 40ms (View: 20, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:10:03) [GET]
  [4;36;1mItemType Load (10.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb5fb68a4>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', item_type %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (127.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:10:45) [GET]
  [4;35;1mItemType Load (1.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb612f460>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', item_type %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (56.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:11:22) [GET]
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined local variable or method `admin_item_type' for #<ActionView::Base:0xb5f90578>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (121.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 18:13:24) [GET]
  Parameters: {"id"=>"show"}
  [4;35;1mItemType Load (0.2ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find ItemType with ID=show):
  app/controllers/admin/item_types_controller.rb:17:in `show'

Rendered rescues/_trace (39.7ms)
Rendered rescues/_request_and_response (4.6ms)
Rendering rescues/layout (not_found)


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 18:13:27) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 47ms (View: 11, DB: 1) | 200 OK [http://localhost/admin/item_types/show/1]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 18:14:52) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 37ms (View: 14, DB: 1) | 200 OK [http://localhost/admin/item_types/show/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:14:54) [GET]
  [4;36;1mItemType Load (1.4ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined local variable or method `admin_item_type' for #<ActionView::Base:0xb5f6d49c>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (122.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 18:14:57) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit

ActionView::TemplateError (undefined method `include?' for :form:Symbol) on line #4 of app/views/admin/item_types/edit.html.erb:
1: <h1>Editing item type</h1>
2: 
3: <% form_for([:admin, @item_type]) do |f| %>
4:   <%= render :partial => :form, :local => { :f => f, :button_text => "Update" } %>
5: <% end %>
6: 
7: <%= link_to 'Show', admin_item_type_path(@item_type) %> |

    app/views/admin/item_types/edit.html.erb:4
    app/views/admin/item_types/edit.html.erb:3

Rendered rescues/_trace (48.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 18:15:29) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (4.4ms)
Completed in 42ms (View: 20, DB: 1) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:15:33) [GET]
  [4;35;1mItemType Load (2.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined local variable or method `admin_item_type' for #<ActionView::Base:0xb5f02e44>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (60.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:16:02) [GET]
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (admin_item_type_url failed to generate from {:controller=>"admin/item_types", :action=>"show"} - you may have ambiguous routes, or you may need to supply additional parameters for this route.  content_url has the following required parameters: ["admin", "item_types", :id] - are they all satisfied?) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type_path %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    (eval):16:in `admin_item_type_path'
    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (88.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:16:46) [GET]
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb5ec0878>) on line #15 of app/views/admin/item_types/index.html.erb:
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>
17: <% end %>
18: </table>

    app/views/admin/item_types/index.html.erb:15
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (53.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:16:56) [GET]
  [4;36;1mItemType Load (0.9ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `show_admin_item_type_path' for #<ActionView::Base:0xb5febe14>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', show_admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (125.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:17:16) [GET]
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `admin_item_type' for #<ActionView::Base:0xb615bec0>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (54.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:18:00) [GET]
  [4;36;1mItemType Load (1.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb5fc2848>) on line #15 of app/views/admin/item_types/index.html.erb:
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>
17: <% end %>
18: </table>

    app/views/admin/item_types/index.html.erb:15
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (122.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:18:09) [GET]
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 23ms (View: 7, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:18:17) [GET]
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `item_type_path' for #<ActionView::Base:0xb60998ac>) on line #14 of app/views/admin/item_types/index.html.erb:
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Destroy', item_type, :confirm => 'Are you sure?', :method => :delete %></td>
15:   </tr>
16: <% end %>
17: </table>

    app/views/admin/item_types/index.html.erb:14
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (55.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:18:46) [GET]
  [4;35;1mItemType Load (1.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `name' for :admin:Symbol) on line #11 of app/views/admin/item_types/index.html.erb:
8: 
9: <% [:admin, @item_types].each do |item_type| %>
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>

    app/views/admin/item_types/index.html.erb:11
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (51.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:21:36) [GET]
  [4;36;1mItemType Load (1.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 38ms (View: 19, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 18:21:44) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 45ms (View: 24, DB: 1) | 200 OK [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 18:21:47) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (4.2ms)
Completed in 34ms (View: 12, DB: 1) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 18:33:00) [GET]
  [4;35;1mItemType Load (0.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 15ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-07 18:39:10) [GET]
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 17ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 21:39:02) [GET]
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (6.9ms)
Completed in 51ms (View: 29, DB: 0) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 21:39:33) [GET]
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (5.1ms)
Completed in 33ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 21:43:37) [GET]

NameError (uninitialized constant Admin::PricedItemsController::ItemTypes):
  app/controllers/admin/priced_items_controller.rb:29:in `new'

Rendered rescues/_trace (54.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 21:44:10) [GET]
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:31:in `new'

Rendered rescues/_trace (124.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 21:44:20) [GET]
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (11.2ms)
Completed in 50ms (View: 17, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateItemTypes (20090807142132)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mDROP TABLE "item_types"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20090807142132'[0m
  [4;35;1mSQL (0.8ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("priced_items")[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreatePricedItems (20090807141552)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mDROP TABLE "priced_items"[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20090807141552'[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookings (20090807134934)
Migrating to CreateBookingItems (20090807141237)
Migrating to CreatePricedItems (20090807141552)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCREATE TABLE "priced_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "item_type_id" integer, "price" decimal(8,2) DEFAULT 0, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807141552')[0m
Migrating to CreateItemTypes (20090807142132)
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "item_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "total" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807142132')[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("item_types")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("priced_items")[0m


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-07 21:46:55) [GET]
  [4;36;1mPricedItem Load (1.1ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 32ms (View: 11, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-07 21:46:59) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 23ms (View: 3, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 21:47:06) [GET]
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 9ms (View: 1, DB: 0) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 21:47:09) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (5.1ms)
Completed in 33ms (View: 12, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 21:47:16) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (0.3ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 20:47:16', '2009-08-07 20:47:16', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f36884>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (44.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 21:49:31) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Create (0.5ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 20:49:31', '2009-08-07 20:49:31', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60ae6a8>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (44.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 21:50:07) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (1.1ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 20:50:07', '2009-08-07 20:50:07', 10)[0m

NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.call):
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (140.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 21:50:32) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Create (1.0ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 20:50:32', '2009-08-07 20:50:32', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb612fde8>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (88.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:00:50) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (0.3ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 21:00:50', '2009-08-07 21:00:50', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb6028dc8>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (72.8ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:01:28) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Create (0.4ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 21:01:28', '2009-08-07 21:01:28', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5ef3f48>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (44.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:01:44) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (0.9ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 21:01:44', '2009-08-07 21:01:44', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb6099898>):
  app/controllers/admin/item_types_controller.rb:49:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (70.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:02:29) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}

Errno::ENOENT (No such file or directory - /home/steph/Sites/RailsDev/simplebooker/app/views/admin/item_types/create.html.erb):
  

Rendered rescues/_trace (137.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:02:51) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}

NoMethodError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.call):
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (39.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:03:17) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.2ms)
Completed in 32ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 22:04:31) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.2ms)
Completed in 30ms (View: 10, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:04:39) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}

NoMethodError (undefined method `debug' for #<Admin::ItemTypesController:0xb5fb9068>):
  app/controllers/admin/item_types_controller.rb:44:in `create'

Rendered rescues/_trace (98.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:04:54) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Create (0.7ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 21:04:54', '2009-08-07 21:04:54', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb616c5e0>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (115.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:06:04) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.save):
  app/controllers/admin/item_types_controller.rb:48:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (37.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:06:37) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Create (0.9ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-07 21:06:37', '2009-08-07 21:06:37', 10)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f88760>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (115.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:06:46) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Create (0.7ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:06:46', '2009-08-07 21:06:46', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60fc2b8>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (99.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:20:52) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Load (1.3ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `admin_item_type_path' for #<ActionView::Base:0xb5f4a640>) on line #13 of app/views/admin/item_types/index.html.erb:
10:   <tr>
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', admin_item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', admin_item_type_url(item_type), :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>

    app/views/admin/item_types/index.html.erb:13
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (60.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:21:45) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Load (3.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index

ActionView::TemplateError (undefined method `edit_admin_item_type_path' for #<ActionView::Base:0xb609f504>) on line #14 of app/views/admin/item_types/index.html.erb:
11:     <td><%=h item_type.name %></td>
12:     <td><%=h item_type.total %></td>
13:     <td><%= link_to 'Show', item_type_path(item_type) %></td>
14:     <td><%= link_to 'Edit', edit_admin_item_type_path(item_type) %></td>
15:     <td><%= link_to 'Destroy', admin_item_type_url(item_type), :confirm => 'Are you sure?', :method => :delete %></td>
16:   </tr>
17: <% end %>

    app/views/admin/item_types/index.html.erb:14
    app/views/admin/item_types/index.html.erb:9:in `each'
    app/views/admin/item_types/index.html.erb:9
    app/controllers/admin/item_types_controller.rb:8:in `index'

Rendered rescues/_trace (47.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:22:13) [GET]
  [4;35;1mItemType Load (1.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 75ms (View: 66, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing ApplicationController#destroy (for 127.0.0.1 at 2009-08-07 22:22:17) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"10"}

NameError (uninitialized constant AdminitemTypesController):
  

Rendered rescues/_trace (73.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#edit (for 127.0.0.1 at 2009-08-07 22:23:03) [GET]
  Parameters: {"id"=>"10"}

NameError (uninitialized constant AdminitemTypesController):
  

Rendered rescues/_trace (30.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#destroy (for 127.0.0.1 at 2009-08-07 22:23:13) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"9"}

NameError (uninitialized constant AdminitemTypesController):
  

Rendered rescues/_trace (78.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#destroy (for 127.0.0.1 at 2009-08-07 22:23:44) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"10"}

NameError (uninitialized constant AdminitemTypesController):
  

Rendered rescues/_trace (127.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#destroy (for 127.0.0.1 at 2009-08-07 22:24:01) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1"}

NameError (uninitialized constant AdminitemTypesController):
  

Rendered rescues/_trace (33.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:30:08) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"10"}
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 10) [0m
  [4;35;1mItemType Destroy (0.3ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 10[0m
Redirected to http://localhost:3000/item_types
Completed in 20ms (DB: 1) | 302 Found [http://localhost/item_types/10]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:30:08) [GET]
  [4;36;1mItemType Load (1.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 25ms (View: 12, DB: 2) | 200 OK [http://localhost/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:30:10) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"9"}
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 9) [0m
  [4;36;1mItemType Destroy (0.3ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 9[0m
Redirected to http://localhost:3000/item_types
Completed in 25ms (DB: 1) | 302 Found [http://localhost/item_types/9]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:30:10) [GET]
  [4;35;1mItemType Load (3.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 43ms (View: 21, DB: 3) | 200 OK [http://localhost/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:30:12) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"8"}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 8) [0m
  [4;35;1mItemType Destroy (0.3ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 8[0m
Redirected to http://localhost:3000/item_types
Completed in 24ms (DB: 1) | 302 Found [http://localhost/item_types/8]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:30:12) [GET]
  [4;36;1mItemType Load (1.1ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 21ms (View: 12, DB: 1) | 200 OK [http://localhost/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:30:15) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"7"}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 7) [0m
  [4;36;1mItemType Destroy (0.3ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 7[0m
Redirected to http://localhost:3000/item_types
Completed in 33ms (DB: 1) | 302 Found [http://localhost/item_types/7]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:30:15) [GET]
  [4;35;1mItemType Load (1.1ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 18ms (View: 8, DB: 1) | 200 OK [http://localhost/item_types]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 22:31:28) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}

ActionController::RoutingError (No route matches "/item_types/6" with {:method=>:delete}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 22:32:04) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}

ActionController::RoutingError (No route matches "/item_types/6" with {:method=>:delete}):
  

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-07 22:32:08) [GET]

ActionController::RoutingError (No route matches "/item_types" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:15) [GET]
  [4;36;1mItemType Load (2.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 48ms (View: 27, DB: 3) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:32:17) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"6"}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 6) [0m
  [4;36;1mItemType Destroy (0.3ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 6[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 29ms (DB: 1) | 302 Found [http://localhost/admin/item_types/6]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:17) [GET]
  [4;35;1mItemType Load (1.2ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 18ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:32:20) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"5"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 5) [0m
  [4;35;1mItemType Destroy (0.4ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 5[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 42ms (DB: 1) | 302 Found [http://localhost/admin/item_types/5]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:21) [GET]
  [4;36;1mItemType Load (0.9ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 22ms (View: 13, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:32:23) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"4"}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
  [4;36;1mItemType Destroy (0.3ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 4[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 29ms (DB: 1) | 302 Found [http://localhost/admin/item_types/4]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:23) [GET]
  [4;35;1mItemType Load (1.1ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 18ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:32:31) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"3"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
  [4;35;1mItemType Destroy (0.7ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 3[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 36ms (DB: 2) | 302 Found [http://localhost/admin/item_types/3]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:31) [GET]
  [4;36;1mItemType Load (2.1ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 33ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 22:32:36) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"2"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;36;1mItemType Destroy (0.7ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 2[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 32ms (DB: 1) | 302 Found [http://localhost/admin/item_types/2]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:36) [GET]
  [4;35;1mItemType Load (1.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 30ms (View: 10, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 22:32:37) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (2.1ms)
Completed in 14ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:38) [GET]
  [4;35;1mItemType Load (1.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 34ms (View: 11, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 22:32:40) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 29ms (View: 7, DB: 1) | 200 OK [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:41) [GET]
  [4;35;1mItemType Load (1.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 30ms (View: 11, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 22:32:43) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (1.7ms)
Completed in 20ms (View: 5, DB: 0) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#update (for 127.0.0.1 at 2009-08-07 22:32:48) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1", "item_type"=>{"name"=>"Bunk", "total"=>"12"}}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mItemType Update (0.6ms)[0m   [0;1mUPDATE "item_types" SET "total" = 12, "updated_at" = '2009-08-07 21:32:48' WHERE "id" = 1[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 40ms (DB: 1) | 302 Found [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:48) [GET]
  [4;35;1mItemType Load (1.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 29ms (View: 10, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 22:32:51) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (1.7ms)
Completed in 27ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#update (for 127.0.0.1 at 2009-08-07 22:32:56) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mItemType Update (0.6ms)[0m   [0;1mUPDATE "item_types" SET "total" = 10, "updated_at" = '2009-08-07 21:32:56' WHERE "id" = 1[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 38ms (DB: 1) | 302 Found [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 22:32:56) [GET]
  [4;35;1mItemType Load (0.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 102ms (View: 4, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 22:33:01) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.6ms)
Completed in 33ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:33:24) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.7ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:33:24', '2009-08-07 21:33:24', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb611667c>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (102.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 22:38:47) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (1.9ms)
Completed in 30ms (View: 10, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:39:11) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;35;1mItemType Create (1.1ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:39:11', '2009-08-07 21:39:11', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f8a7f4>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (136.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:55:57) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.3ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:55:57', '2009-08-07 21:55:57', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60794d0>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (42.4ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:56:27) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;35;1mItemType Create (0.8ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:56:27', '2009-08-07 21:56:27', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f3df44>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (114.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:56:46) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.7ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:56:46', '2009-08-07 21:56:46', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60f8974>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (41.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 22:57:08) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (6.3ms)
Completed in 51ms (View: 30, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 22:57:10) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;35;1mItemType Create (0.7ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 21:57:10', '2009-08-07 21:57:10', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f856f0>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (133.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:00:04) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.6ms)
Completed in 45ms (View: 24, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 23:00:05) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.9ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 22:00:05', '2009-08-07 22:00:05', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb60801e0>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (50.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 23:04:21) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;35;1mItemType Create (1.0ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 22:04:21', '2009-08-07 22:04:21', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f8946c>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (166.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 23:06:40) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.9ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 22:06:40', '2009-08-07 22:06:40', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb6103194>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (81.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 23:07:00) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 30ms (View: 7, DB: 1) | 200 OK [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:01) [GET]
  [4;36;1mItemType Load (7.8ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 64ms (View: 37, DB: 8) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:05) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"11"}
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 11) [0m
  [4;36;1mItemType Destroy (8.7ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 11[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 36ms (DB: 9) | 302 Found [http://localhost/admin/item_types/11]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:05) [GET]
  [4;35;1mItemType Load (1.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 20ms (View: 11, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:07) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"12"}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 12) [0m
  [4;35;1mItemType Destroy (0.3ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 12[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 33ms (DB: 1) | 302 Found [http://localhost/admin/item_types/12]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:07) [GET]
  [4;36;1mItemType Load (1.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 24ms (View: 12, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:09) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"13"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 13) [0m
  [4;36;1mItemType Destroy (0.7ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 13[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 40ms (DB: 1) | 302 Found [http://localhost/admin/item_types/13]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:09) [GET]
  [4;35;1mItemType Load (2.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 44ms (View: 22, DB: 3) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:11) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"14"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 14) [0m
  [4;35;1mItemType Destroy (0.8ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 14[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 38ms (DB: 2) | 302 Found [http://localhost/admin/item_types/14]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:12) [GET]
  [4;36;1mItemType Load (2.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 41ms (View: 20, DB: 3) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:15) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"15"}
  [4;35;1mItemType Load (0.9ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 15) [0m
  [4;36;1mItemType Destroy (0.6ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 15[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 39ms (DB: 1) | 302 Found [http://localhost/admin/item_types/15]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:15) [GET]
  [4;35;1mItemType Load (0.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 20ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:17) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"16"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 16) [0m
  [4;35;1mItemType Destroy (0.7ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 16[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 34ms (DB: 1) | 302 Found [http://localhost/admin/item_types/16]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:17) [GET]
  [4;36;1mItemType Load (2.2ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 39ms (View: 17, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:19) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"17"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 17) [0m
  [4;36;1mItemType Destroy (0.7ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 17[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 53ms (DB: 1) | 302 Found [http://localhost/admin/item_types/17]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:19) [GET]
  [4;35;1mItemType Load (2.1ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 34ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:21) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"18"}
  [4;36;1mItemType Load (0.9ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 18) [0m
  [4;35;1mItemType Destroy (0.7ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 18[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 39ms (DB: 2) | 302 Found [http://localhost/admin/item_types/18]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:22) [GET]
  [4;36;1mItemType Load (1.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 33ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-07 23:07:24) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"19"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 19) [0m
  [4;36;1mItemType Destroy (0.7ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 19[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 42ms (DB: 1) | 302 Found [http://localhost/admin/item_types/19]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:24) [GET]
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 14ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:07:26) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.6ms)
Completed in 39ms (View: 18, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:07:43) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "admin"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.6ms)
Completed in 30ms (View: 10, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:07:45) [GET]
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 12ms (View: 4, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:07:49) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (5.3ms)
Completed in 32ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:07:56) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "admin"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.5ms)
Completed in 38ms (View: 9, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:08:34) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "admin"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (3.3ms)
Completed in 78ms (View: 62, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:08:37) [GET]
  [4;36;1mItemType Load (1.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 40ms (View: 20, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-07 23:08:43) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 16ms (View: 7, DB: 0) | 200 OK [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 23:08:45) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (4.4ms)
Completed in 40ms (View: 19, DB: 1) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#update (for 127.0.0.1 at 2009-08-07 23:08:48) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1", "item_type"=>{"name"=>"Bunk", "total"=>"12"}}
  [4;35;1mItemType Load (1.9ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mItemType Update (0.6ms)[0m   [0;1mUPDATE "item_types" SET "total" = 12, "updated_at" = '2009-08-07 22:08:48' WHERE "id" = 1[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 80ms (DB: 2) | 302 Found [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:08:48) [GET]
  [4;35;1mItemType Load (0.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 16ms (View: 4, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-07 23:08:50) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (4.5ms)
Completed in 33ms (View: 12, DB: 1) | 200 OK [http://localhost/admin/item_types/1/edit]


Processing Admin::ItemTypesController#update (for 127.0.0.1 at 2009-08-07 23:08:56) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mItemType Update (0.4ms)[0m   [0;1mUPDATE "item_types" SET "total" = 10, "updated_at" = '2009-08-07 22:08:56' WHERE "id" = 1[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 35ms (DB: 1) | 302 Found [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:08:56) [GET]
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 79ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:08:57) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.0ms)
Completed in 26ms (View: 4, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:08:58) [GET]
  [4;36;1mItemType Load (1.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 31ms (View: 12, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:09:03) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (5.4ms)
Completed in 31ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:09:10) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "admin"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.1ms)
Completed in 27ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-07 23:09:32) [GET]
  [4;35;1mItemType Load (1.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 30ms (View: 10, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-07 23:09:33) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.2ms)
Completed in 37ms (View: 17, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-07 23:09:38) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room 4", "total"=>"1"}}
  [4;36;1mItemType Create (0.9ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES(NULL, '2009-08-07 22:09:38', '2009-08-07 22:09:38', NULL)[0m

NoMethodError (undefined method `item_type_url' for #<Admin::ItemTypesController:0xb5f7daa4>):
  app/controllers/admin/item_types_controller.rb:50:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (109.9ms)
Rendered rescues/_request_and_response (1.7ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-07 23:13:06) [GET]
  [4;35;1mPricedItem Load (0.5ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 18ms (View: 9, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-07 23:13:09) [GET]
  [4;36;1mItemType Load (1.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (13.3ms)
Completed in 70ms (View: 36, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-07 23:13:23) [POST]
  Parameters: {"priced_item"=>{"price"=>"12.0", "name"=>"Adult Bunk", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mPricedItem Create (0.8ms)[0m   [0mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Adult Bunk', 12.0, '2009-08-07 22:13:23', '2009-08-07 22:13:23', 1)[0m

NoMethodError (undefined method `priced_item_url' for #<Admin::PricedItemsController:0xb600a418>):
  app/controllers/admin/priced_items_controller.rb:50:in `create'
  app/controllers/admin/priced_items_controller.rb:47:in `create'

Rendered rescues/_trace (123.4ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:06:09) [GET]
  [4;36;1mPricedItem Load (1.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 77ms (View: 29, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 10:06:13) [GET]
  [4;35;1mItemType Load (1.1ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (15.1ms)
Completed in 85ms (View: 50, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 10:06:29) [POST]
  Parameters: {"priced_item"=>{"price"=>"8", "name"=>"Bunk - under-16", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mPricedItem Create (0.6ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Bunk - under-16', 8.0, '2009-08-08 09:06:30', '2009-08-08 09:06:30', 1)[0m

NoMethodError (undefined method `priced_item_url' for #<Admin::PricedItemsController:0xb6152f00>):
  app/controllers/admin/priced_items_controller.rb:50:in `create'
  app/controllers/admin/priced_items_controller.rb:47:in `create'

Rendered rescues/_trace (43.3ms)
Rendered rescues/_request_and_response (1.7ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 10:20:40) [POST]
  Parameters: {"priced_item"=>{"price"=>"8", "name"=>"Bunk - under-16", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mPricedItem Create (0.3ms)[0m   [0mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Bunk - under-16', 8.0, '2009-08-08 09:20:40', '2009-08-08 09:20:40', 1)[0m
Redirected to http://localhost:3000/admin/priced_items/3
Completed in 22ms (DB: 0) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 10:20:40) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb622732c>) on line #8 of app/views/admin/priced_items/show.html.erb:
5: 
6: <p>
7:   <b>Price:</b>
8:   <%=h number_to_currency(priced_item.price, :unit => "£") %>
9: </p>
10: 
11: 

    app/views/admin/priced_items/show.html.erb:8
    app/controllers/admin/priced_items_controller.rb:19:in `show'

Rendered rescues/_trace (54.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 10:22:16) [POST]
  Parameters: {"priced_item"=>{"price"=>"8", "name"=>"Bunk - under-16", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mPricedItem Create (0.6ms)[0m   [0mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Bunk - under-16', 8.0, '2009-08-08 09:22:16', '2009-08-08 09:22:16', 1)[0m
Redirected to http://localhost:3000/admin/priced_items/4
Completed in 39ms (DB: 1) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 10:22:16) [GET]
  Parameters: {"id"=>"4"}
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 18ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/priced_items/4]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:22:18) [GET]
  [4;35;1mPricedItem Load (2.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 40ms (View: 18, DB: 3) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#destroy (for 127.0.0.1 at 2009-08-08 10:22:21) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"4"}
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
  [4;35;1mPricedItem Destroy (0.3ms)[0m   [0mDELETE FROM "priced_items" WHERE "id" = 4[0m
Redirected to http://localhost:3000/admin/priced_items
Completed in 91ms (DB: 1) | 302 Found [http://localhost/admin/priced_items/4]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:22:21) [GET]
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 20ms (View: 10, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#destroy (for 127.0.0.1 at 2009-08-08 10:22:24) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"3"}
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;36;1mPricedItem Destroy (0.2ms)[0m   [0;1mDELETE FROM "priced_items" WHERE "id" = 3[0m
Redirected to http://localhost:3000/admin/priced_items
Completed in 32ms (DB: 1) | 302 Found [http://localhost/admin/priced_items/3]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:22:24) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 18ms (View: 9, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#edit (for 127.0.0.1 at 2009-08-08 10:22:26) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Rendering template within layouts/application
Rendering admin/priced_items/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/edit.html.erb:4
    app/views/admin/priced_items/edit.html.erb:3

Rendered rescues/_trace (63.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#edit (for 127.0.0.1 at 2009-08-08 10:23:43) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/edit
Rendered admin/priced_items/_form (4.5ms)
Completed in 24ms (View: 9, DB: 1) | 200 OK [http://localhost/admin/priced_items/2/edit]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:23:49) [GET]
  [4;35;1mPricedItem Load (1.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 42ms (View: 21, DB: 2) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#edit (for 127.0.0.1 at 2009-08-08 10:23:51) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/edit
Rendered admin/priced_items/_form (5.1ms)
Completed in 49ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/priced_items/1/edit]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:23:54) [GET]
  [4;36;1mPricedItem Load (1.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 29ms (View: 15, DB: 2) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#edit (for 127.0.0.1 at 2009-08-08 10:24:33) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mItemType Load (0.9ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/edit
Rendered admin/priced_items/_form (8.0ms)
Completed in 49ms (View: 15, DB: 2) | 200 OK [http://localhost/admin/priced_items/1/edit]


Processing Admin::PricedItemsController#update (for 127.0.0.1 at 2009-08-08 10:24:52) [PUT]
  Parameters: {"priced_item"=>{"price"=>"12", "name"=>"Bunk - Adult", "item_type_id"=>"1"}, "commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1"}
  [4;35;1mPricedItem Load (0.9ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Update (0.8ms)[0m   [0;1mUPDATE "priced_items" SET "updated_at" = '2009-08-08 09:24:52', "name" = 'Bunk - Adult' WHERE "id" = 1[0m
Redirected to http://localhost:3000/admin/priced_items/1
Completed in 45ms (DB: 2) | 302 Found [http://localhost/admin/priced_items/1]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 10:24:52) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 39ms (View: 15, DB: 1) | 200 OK [http://localhost/admin/priced_items/1]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:24:54) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 69ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 10:26:25) [GET]
  [4;35;1mItemType Load (1.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 71ms (View: 51, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-08 10:26:28) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"20"}
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 20) [0m
  [4;35;1mItemType Destroy (0.2ms)[0m   [0mDELETE FROM "item_types" WHERE "id" = 20[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 32ms (DB: 0) | 302 Found [http://localhost/admin/item_types/20]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 10:26:28) [GET]
  [4;36;1mItemType Load (1.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 13ms (View: 4, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 10:26:30) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (6.6ms)
Completed in 81ms (View: 59, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 10:26:37) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Family Room", "total"=>"1"}}

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.save):
  app/controllers/admin/item_types_controller.rb:48:in `create'
  app/controllers/admin/item_types_controller.rb:47:in `create'

Rendered rescues/_trace (76.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 10:30:22) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Family Room", "total"=>"1"}}

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.save):
  app/controllers/admin/item_types_controller.rb:47:in `create'
  app/controllers/admin/item_types_controller.rb:46:in `create'

Rendered rescues/_trace (99.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 10:31:21) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Family Room", "total"=>"1"}}
  [4;35;1mItemType Create (0.9ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Family Room', '2009-08-08 09:31:21', '2009-08-08 09:31:21', 1)[0m
Redirected to http://localhost:3000/admin/item_types/21
Completed in 41ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 10:31:22) [GET]
  Parameters: {"id"=>"21"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 21) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 50ms (View: 28, DB: 1) | 200 OK [http://localhost/admin/item_types/21]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 10:31:24) [GET]
  [4;35;1mItemType Load (1.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 32ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:31:30) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 44ms (View: 24, DB: 2) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 10:31:31) [GET]
  [4;35;1mItemType Load (1.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (10.5ms)
Completed in 51ms (View: 17, DB: 2) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 10:31:42) [POST]
  Parameters: {"priced_item"=>{"price"=>"40", "name"=>"Family Room", "item_type_id"=>"21"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mPricedItem Create (0.9ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Family Room', 40.0, '2009-08-08 09:31:42', '2009-08-08 09:31:42', 21)[0m
Redirected to http://localhost:3000/admin/priced_items/5
Completed in 44ms (DB: 1) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 10:31:43) [GET]
  Parameters: {"id"=>"5"}
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 17ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/priced_items/5]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 10:31:44) [GET]
  [4;36;1mPricedItem Load (2.1ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 49ms (View: 25, DB: 2) | 200 OK [http://localhost/admin/priced_items]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 17:28:58) [GET]
  [4;36;1mBooking Load (1.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 221ms (View: 144, DB: 1) | 200 OK [http://localhost/bookings/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 17:29:01) [GET]
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (304.4ms)
Completed in 357ms (View: 336, DB: 0) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 17:29:08) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"13", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8"}}
  [4;35;1mBooking Create (1.1ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-13', '2009-08-08 16:29:08', '2009-08-08 16:29:08', '2009-08-08')[0m
Redirected to http://localhost:3000/bookings/1
Completed in 147ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 17:29:08) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 1) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 46ms (View: 23, DB: 1) | 200 OK [http://localhost/bookings/1]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 17:29:11) [GET]
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 14ms (View: 6, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 17:29:21) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"1"}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 1) [0m
  [4;35;1mBooking Destroy (0.5ms)[0m   [0mDELETE FROM "bookings" WHERE "id" = 1[0m
Redirected to http://localhost:3000/bookings
Completed in 40ms (DB: 1) | 302 Found [http://localhost/bookings/1]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 17:29:22) [GET]
  [4;36;1mBooking Load (0.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 9ms (View: 2, DB: 0) | 200 OK [http://localhost/bookings]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 17:46:00) [GET]
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (6.0ms)
Completed in 98ms (View: 42, DB: 0) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:47:57) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:54:in `create'
    app/controllers/admin/priced_items_controller.rb:48:in `create'

Rendered rescues/_trace (89.0ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:48:54) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:54:in `create'
    app/controllers/admin/priced_items_controller.rb:48:in `create'

Rendered rescues/_trace (62.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 17:49:26) [GET]
  [4;36;1mItemType Load (1.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (5.2ms)
Completed in 42ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:49:28) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:54:in `create'
    app/controllers/admin/priced_items_controller.rb:48:in `create'

Rendered rescues/_trace (138.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:51:14) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (undefined method `name' for :admin:Symbol) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, [:admin, @item_types], :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:54:in `create'
    app/controllers/admin/priced_items_controller.rb:48:in `create'

Rendered rescues/_trace (65.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:53:23) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (5.7ms)
Completed in 32ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:54:54) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}

NoMethodError (undefined method `put' for #<Admin::PricedItemsController:0xb614c830>):
  app/controllers/admin/priced_items_controller.rb:47:in `create'

Rendered rescues/_trace (38.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:55:02) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (1.1ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (9.9ms)
Completed in 63ms (View: 15, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:56:22) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (10.3ms)
Completed in 63ms (View: 16, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:57:47) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NoMethodError (undefined method `find_all' for #<Class:0xb5f92350>):
  app/controllers/admin/priced_items_controller.rb:50:in `create'

Rendered rescues/_trace (41.6ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 17:58:59) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (10.7ms)
Completed in 71ms (View: 17, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 18:02:35) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
Rendering template within layouts/application
Rendering admin/priced_items/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.map) on line #13 of app/views/admin/priced_items/_form.html.erb:
10:   </p>
11:   <p>
12:     <%= f.label :item_type %><br />
13:     <%= f.collection_select(:item_type_id, @item_types, :id, :name) %>
14:   </p>
15:   <p>
16:     <%= f.submit button_text %>

    app/views/admin/priced_items/_form.html.erb:13
    app/views/admin/priced_items/new.html.erb:4
    app/views/admin/priced_items/new.html.erb:3
    app/controllers/admin/priced_items_controller.rb:58:in `create'
    app/controllers/admin/priced_items_controller.rb:52:in `create'

Rendered rescues/_trace (68.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 18:03:11) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}

NoMethodError (undefined method `find' for #<Admin::PricedItemsController:0xb61b1834>):
  app/controllers/application_controller.rb:12:in `find_item_types'
  app/controllers/admin/priced_items_controller.rb:47:in `create'

Rendered rescues/_trace (40.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 18:03:36) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}

NoMethodError (undefined method `find' for #<Admin::PricedItemsController:0xb60c26a8>):
  app/controllers/application_controller.rb:12:in `find_item_types'
  app/controllers/admin/priced_items_controller.rb:47:in `create'

Rendered rescues/_trace (38.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 18:03:54) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (5.0ms)
Completed in 48ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 18:04:30) [GET]
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (4.4ms)
Completed in 125ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 18:04:31) [POST]
  Parameters: {"priced_item"=>{"price"=>"0.0", "name"=>"", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (5.1ms)
Completed in 45ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:07:32) [GET]
  [4;35;1mItemType Load (1.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 96ms (View: 74, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 18:07:36) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (9.4ms)
Completed in 82ms (View: 59, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 18:07:41) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"", "total"=>""}}
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (5.0ms)
Completed in 51ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:07:56) [GET]
  [4;36;1mItemType Load (2.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 39ms (View: 17, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:39:55) [GET]
  [4;35;1mItemType Load (1.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 34ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:40:45) [GET]
  [4;36;1mItemType Load (0.9ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 118ms (View: 15, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:43:01) [GET]
  [4;35;1mItemType Load (1.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 70ms (View: 12, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:43:03) [GET]
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 34ms (View: 6, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:43:29) [GET]
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 32ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:43:56) [GET]
  [4;36;1mItemType Load (1.0ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 33ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:49:29) [GET]
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 46ms (View: 15, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 18:49:42) [GET]
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 31ms (View: 5, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 18:59:41) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.7ms)
Completed in 54ms (View: 15, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 18:59:50) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'Bunk') LIMIT 1[0m
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (1.5ms)
Completed in 36ms (View: 4, DB: 0) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 18:59:55) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"bunk", "total"=>"10"}}
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'bunk') LIMIT 1[0m
  [4;36;1mItemType Create (1.8ms)[0m   [0;1mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('bunk', '2009-08-08 17:59:55', '2009-08-08 17:59:55', 10)[0m
Redirected to http://localhost:3000/admin/item_types/22
Completed in 100ms (DB: 2) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 18:59:56) [GET]
  Parameters: {"id"=>"22"}
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 22) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 98ms (View: 32, DB: 1) | 200 OK [http://localhost/admin/item_types/22]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 19:00:01) [GET]
  [4;36;1mItemType Load (1.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 40ms (View: 6, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-08 19:00:05) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"22"}
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 22) [0m
  [4;36;1mItemType Destroy (0.2ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 22[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 40ms (DB: 1) | 302 Found [http://localhost/admin/item_types/22]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 19:00:05) [GET]
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 34ms (View: 6, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 19:00:35) [GET]
  [4;36;1mItemType Load (1.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 47ms (View: 7, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 19:00:44) [GET]
  [4;35;1mItemType Load (2.3ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 70ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 19:01:12) [GET]
  [4;36;1mItemType Load (1.7ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 42ms (View: 5, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 19:07:41) [GET]
  [4;35;1mBooking Load (1.2ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 52ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:07:44) [GET]
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (70.8ms)
Completed in 106ms (View: 80, DB: 0) | 200 OK [http://localhost/bookings/new]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-08 19:07:54) [GET]

ActionController::RoutingError (No route matches "/booking_items" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:13:57) [GET]
  [4;36;1mItemType Load (1.1ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (8.7ms)
Completed in 52ms (View: 13, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:16:37) [GET]

NameError (uninitialized constant ApplicationController::PricedItems):
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (96.5ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 19:16:54) [GET]
  [4;35;1mBooking Load (1.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 39ms (View: 3, DB: 2) | 200 OK [http://localhost/bookings/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:16:55) [GET]
  [4;36;1mPricedItem Load (2.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (19.5ms)
Completed in 77ms (View: 31, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:18:23) [GET]

NameError (undefined local variable or method `quantity' for #<BookingsController:0xb6fcc5a4>):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (102.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:19:15) [GET]
  [4;35;1mPricedItem Load (0.0ms)[0m   [0mSQLite3::SQLException: no such column: quantity: SELECT * FROM "priced_items" ORDER BY quantity[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: quantity: SELECT * FROM "priced_items"  ORDER BY quantity):
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (54.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:20:16) [GET]

NoMethodError (undefined method `quantity' for :item_type:Symbol):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (110.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:20:45) [GET]
  [4;36;1mPricedItem Load (0.0ms)[0m   [0;1mSQLite3::SQLException: no such column: item_type.quantity: SELECT * FROM "priced_items" ORDER BY item_type.quantity[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: item_type.quantity: SELECT * FROM "priced_items"  ORDER BY item_type.quantity):
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (62.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:21:03) [GET]

ArgumentError (wrong number of arguments (0 for 1)):
  app/controllers/bookings_controller.rb:28:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (103.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:21:17) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (11.1ms)
Completed in 37ms (View: 14, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:23:43) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `quantity' for "#<ItemType:0xb6fe499c>":ItemType) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_items| %>
13:   <p>
14:     <%=h priced_items.item_type.quantity %> x <%=h priced_items.name %>
15:   </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (126.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:23:59) [GET]
  [4;36;1mPricedItem Load (1.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `item_types' for #<PricedItem:0xb7089d20>) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_items| %>
13:   <p>
14:     <%=h priced_items.item_types.quantity %> x <%=h priced_items.name %>
15:   </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (123.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:24:38) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `item_type' for #<Array:0xb70bca90>) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.item_type.each do |priced_items| %>
13:   <p>
14:     <%=h priced_items.item_types.quantity %> x <%=h priced_items.name %>
15:   </p>

    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (117.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:24:52) [GET]
  [4;36;1mPricedItem Load (1.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `item_types' for #<Array:0xb711dc64>) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.item_types.each do |priced_items| %>
13:   <p>
14:     <%=h priced_items.item_types.quantity %> x <%=h priced_items.name %>
15:   </p>

    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (65.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:26:47) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting $end
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    <p>\n      "

; @output_buffer.concat((h priced_item.item_type.quantity ).to_s); @output_buffer.concat " x "; @output_buffer.concat((h priced_item.name ).to_s); @output_buffer.concat "\n    </p>\n    "

;  end ; @output_buffer.concat "\n  "
;  end ; @output_buffer.concat "\n  <p>\n    "

; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n\n"


; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:30:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting $end) on line #23 of app/views/bookings/_form.html.erb:
20:   </p>

    app/views/bookings/_form.html.erb:23:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (66.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:26:56) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `quantity' for "#<ItemType:0xb6f456e4>":ItemType) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h priced_item.item_type.quantity %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (69.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:27:17) [GET]
  [4;36;1mPricedItem Load (1.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 21) [0m
Rendered bookings/_form (22.8ms)
Completed in 103ms (View: 59, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:28:46) [GET]
  [4;36;1mPricedItem Load (0.0ms)[0m   [0;1mSQLite3::SQLException: no such column: item_type.total: SELECT * FROM "priced_items" ORDER BY item_type.total[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: item_type.total: SELECT * FROM "priced_items"  ORDER BY item_type.total):
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (51.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:28:59) [GET]

NoMethodError (undefined method `total' for :item_type:Symbol):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (49.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:29:07) [GET]

NoMethodError (undefined method `total' for :item_types:Symbol):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (41.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:29:21) [GET]

NameError (undefined local variable or method `total' for #<BookingsController:0xb701829c>):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:29:28) [GET]
  [4;35;1mPricedItem Load (0.0ms)[0m   [0mSQLite3::SQLException: no such column: total: SELECT * FROM "priced_items" ORDER BY total[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: total: SELECT * FROM "priced_items"  ORDER BY total):
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (56.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:29:47) [GET]
  [4;36;1mPricedItem Load (0.0ms)[0m   [0;1mSQLite3::SQLException: no such column: item_types.total: SELECT * FROM "priced_items" ORDER BY item_types.total[0m

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: item_types.total: SELECT * FROM "priced_items"  ORDER BY item_types.total):
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
  app/controllers/application_controller.rb:16:in `find_priced_items'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (108.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:32:34) [GET]
  [4;35;1mPricedItem Load (1.4ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `nil' for #<Booking:0xb713100c>) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(:nil, [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (73.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:32:41) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (interning empty string) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(nil, [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (79.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:33:15) [GET]
  [4;35;1mPricedItem Load (1.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `quantity' for :booking_item:Symbol) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(:booking_item.quantity, [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (67.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:34:03) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined local variable or method `booking_item' for #<ActionView::Base:0xb6f5e11c>) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(booking_item.quantity, [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (68.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:34:38) [GET]
  [4;35;1mPricedItem Load (1.5ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (interning empty string) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select([], [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (139.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:36:11) [GET]

NoMethodError (undefined method `quants=' for #<Booking:0xb6fee7bc>):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (42.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:37:12) [GET]

ArgumentError (wrong number of arguments (1 for 0)):
  app/controllers/bookings_controller.rb:28:in `new'
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (72.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:37:37) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `[]' for :quants:Symbol) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(:quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:30:in `new'

Rendered rescues/_trace (127.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:40:09) [GET]

NoMethodError (undefined method `quants=' for #<Booking:0xb70744fc>):
  app/controllers/bookings_controller.rb:28:in `new'

Rendered rescues/_trace (108.9ms)
Rendered rescues/_request_and_response (0.8ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#new (for 127.0.0.1 at 2009-08-08 19:41:21) [GET]

SyntaxError (/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:28: syntax error, unexpected '=', expecting kEND
    @booking.add(quants) = "[]"
                          ^):
  

Rendered rescues/_trace (140.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#new (for 127.0.0.1 at 2009-08-08 19:41:47) [GET]

SyntaxError (/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:28: syntax error, unexpected '=', expecting kEND
    @booking.create(quants) = "[]"
                             ^):
  

Rendered rescues/_trace (63.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:42:08) [GET]
  [4;35;1mPricedItem Load (1.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `[]' for :quants:Symbol) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(:quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (121.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:42:27) [GET]
  [4;36;1mPricedItem Load (1.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (interning empty string) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%=h f.select(@quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (125.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:46:26) [GET]
  [4;35;1mPricedItem Load (1.4ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (28.8ms)
Completed in 85ms (View: 41, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:47:10) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (11.2ms)
Completed in 47ms (View: 17, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:47:38) [GET]
  [4;35;1mPricedItem Load (1.5ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (13.3ms)
Completed in 111ms (View: 19, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:48:18) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:13: syntax error, unexpected '{', expecting ')'
...utput_buffer.concat(( @quants{priced_item.id} = priced_item....
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:13: syntax error, unexpected '}', expecting ')'
...ncat(( @quants{priced_item.id} = priced_item.id ).to_s); @ou...
                              ^
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    "
; @output_buffer.concat(( @quants{priced_item.id} = priced_item.id ).to_s); @output_buffer.concat "\n    <p>\n       x "

; @output_buffer.concat((h priced_item.name ).to_s); @output_buffer.concat "\n    </p>\n  "

;  end ; @output_buffer.concat "\n  <p>\n    "

; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n\n"


; @output_buffer.concat(( debug(@quants) ).to_s); @output_buffer.concat "\n\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:27:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:13: syntax error, unexpected '{', expecting ')'
...utput_buffer.concat(( @quants{priced_item.id} = priced_item....
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:13: syntax error, unexpected '}', expecting ')'
...ncat(( @quants{priced_item.id} = priced_item.id ).to_s); @ou...
                              ^) on line #13 of app/views/bookings/_form.html.erb:
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants{priced_item.id} = priced_item.id %>
14:     <p>
15:        x <%=h priced_item.name %>
16:     </p>

    app/views/bookings/_form.html.erb:27:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (63.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:48:43) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (12.4ms)
Completed in 41ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 19:49:08) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8"}}
  [4;36;1mBooking Create (0.3ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 18:49:08', '2009-08-08 18:49:08', '2009-08-08')[0m
Redirected to http://localhost:3000/bookings/2
Completed in 62ms (DB: 0) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 19:49:08) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 2) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 20ms (View: 6, DB: 0) | 200 OK [http://localhost/bookings/2]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 19:49:21) [GET]
  [4;36;1mBooking Load (1.5ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 47ms (View: 13, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 19:49:25) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"2"}
  [4;35;1mBooking Load (0.9ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 2) [0m
  [4;36;1mBooking Destroy (0.5ms)[0m   [0;1mDELETE FROM "bookings" WHERE "id" = 2[0m
Redirected to http://localhost:3000/bookings
Completed in 40ms (DB: 1) | 302 Found [http://localhost/bookings/2]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 19:49:25) [GET]
  [4;35;1mBooking Load (0.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 80ms (View: 2, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:50:37) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `1' for #<Booking:0xb712fae0>) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = priced_item.id %>
14:     <p>
15:       <%= f.select(@quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (75.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:51:08) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (interning empty string) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <p>
14:       <%= f.select(@quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
15:     </p>
16:   <% end %>
17:   <p>

    app/views/bookings/_form.html.erb:14
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (71.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:51:26) [GET]
  [4;36;1mPricedItem Load (1.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (interning empty string) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(@quants[priced_item.id], [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (71.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:54:45) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (11.9ms)
Completed in 98ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:57:24) [GET]
  [4;36;1mPricedItem Load (1.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (12.2ms)
Completed in 64ms (View: 20, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:57:35) [GET]
  [4;35;1mPricedItem Load (1.0ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `find_by_priced_item' for :booking_item:Symbol) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(:booking_item.find_by_priced_item(priced_item.id), [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (126.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:57:49) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `find_by_priced_item_id' for :booking_item:Symbol) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(:booking_item.find_by_priced_item_id(priced_item.id), [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (127.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:58:45) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `find' for :booking_item:Symbol) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(:booking_item.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (73.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:58:55) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `find' for :booking_items:Symbol) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(:booking_items.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (67.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:59:06) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `booking_items' for #<ActionView::Base:0xb6f2cec8>) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(self.booking_items.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (73.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:59:20) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined local variable or method `this' for #<ActionView::Base:0xb6f65bb0>) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(this.booking_items.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (68.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:59:26) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `booking_items' for #<ActionView::Helpers::FormBuilder:0xb6f6d07c>) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(f.booking_items.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (87.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 19:59:56) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `booking_items' for :f:Symbol) on line #15 of app/views/bookings/_form.html.erb:
12:   <% @priced_items.each do |priced_item| %>
13:     <%= @quants[priced_item.id] = nil %>
14:     <p>
15:       <%= f.select(:f.booking_items.find(:conditions => priced_item.id).quantity, [0..10]) %> x <%=h priced_item.name %>
16:     </p>
17:   <% end %>
18:   <p>

    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (146.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mBooking Load (0.5ms)[0m   [0;1mSELECT * FROM "bookings" LIMIT 1[0m


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:26:20) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined local variable or method `booking_item' for #<ActionView::Base:0xb703a360>) on line #1 of app/views/bookings/_booking_item_selection.html.erb:
1:     <% new_or_existing = booking_item.new_record? ? 'new' : 'exisiting' %>
2:     <% prefix = "booking[#{new_or_existing}_booking_item_attributes][]" %>
3: 
4:     <% fields_for prefix, booking_item do |bi_form| %>

    app/views/bookings/_booking_item_selection.html.erb:1
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (149.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:28:01) [GET]
  [4;36;1mPricedItem Load (1.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb6fe8830>) on line #7 of app/views/bookings/_booking_item.html.erb:
4:     <% fields_for prefix, booking_item do |bi_form| %>
5: 
6:     <p>
7:       <%= bi_form.select(:quantity, [0..10]) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% end %>

    app/views/bookings/_booking_item.html.erb:7
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (93.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:29:46) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (14.3ms)
Completed in 122ms (View: 20, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:31:25) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (14.8ms)
Completed in 58ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:31:36) [GET]
  [4;35;1mPricedItem Load (1.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.4ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (24.7ms)
Completed in 99ms (View: 39, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 20:32:19) [GET]
  [4;36;1mBooking Load (1.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 39ms (View: 3, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:32:22) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.1ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_form (68.9ms)
Completed in 139ms (View: 74, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:33:26) [GET]
  [4;36;1mPricedItem Load (0.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.8ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (16.1ms)
Completed in 61ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:33:37) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (wrong number of arguments (1 for 2)) on line #7 of app/views/bookings/_booking_item.html.erb:
4:     <% fields_for prefix, booking_item do |bi_form| %>
5: 
6:     <p>
7:       <%= bi_form.select(:quantity) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% end %>

    app/views/bookings/_booking_item.html.erb:7:in `select'
    app/views/bookings/_booking_item.html.erb:7
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (178.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:37:04) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.6ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (15.8ms)
Completed in 46ms (View: 18, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:37:25) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (wrong number of arguments (1 for 2)) on line #7 of app/views/bookings/_booking_item.html.erb:
4:     <% fields_for prefix, booking_item do |bi_form| %>
5: 
6:     <p>
7:       <%= bi_form.select([(0...10)]) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% end %>

    app/views/bookings/_booking_item.html.erb:7:in `select'
    app/views/bookings/_booking_item.html.erb:7
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (87.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:37:52) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.9ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_form (17.0ms)
Completed in 48ms (View: 20, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:38:06) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.8ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (16.9ms)
Completed in 54ms (View: 25, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:38:14) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (4.0ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (17.0ms)
Completed in 65ms (View: 19, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:38:27) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.7ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_booking_item (0.3ms)
Rendered bookings/_form (16.4ms)
Completed in 51ms (View: 19, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:40:04) [GET]
  [4;36;1mPricedItem Load (0.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_booking_item (3.6ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_form (16.9ms)
Completed in 58ms (View: 20, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 20:41:35) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (1.0ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 21) [0m
Rendered bookings/_booking_item (2.8ms)
Rendered bookings/_form (27.7ms)
Completed in 158ms (View: 32, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 20:42:02) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"3"}, {"quantity"=>"2"}, {"quantity"=>"0"}]}}
  [4;35;1mBooking Create (0.4ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-16', '2009-08-08 19:42:02', '2009-08-08 19:42:02', '2009-08-08')[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("item_price_id", "created_at", "quantity", "updated_at", "booking_id") VALUES(NULL, '2009-08-08 19:42:02', 3, '2009-08-08 19:42:02', 3)[0m
  [4;35;1mBookingItem Create (0.1ms)[0m   [0mINSERT INTO "booking_items" ("item_price_id", "created_at", "quantity", "updated_at", "booking_id") VALUES(NULL, '2009-08-08 19:42:02', 2, '2009-08-08 19:42:02', 3)[0m
  [4;36;1mBookingItem Create (0.1ms)[0m   [0;1mINSERT INTO "booking_items" ("item_price_id", "created_at", "quantity", "updated_at", "booking_id") VALUES(NULL, '2009-08-08 19:42:02', 0, '2009-08-08 19:42:02', 3)[0m
Redirected to http://localhost:3000/bookings/3
Completed in 62ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 20:42:02) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 3) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 26ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/3]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 20:42:04) [GET]
  [4;36;1mBooking Load (0.6ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 31ms (View: 5, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 20:44:03) [GET]
  [4;35;1mBooking Load (1.5ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 46ms (View: 13, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 20:44:05) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 3) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (64.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mBooking Load (0.9ms)[0m   [0mSELECT * FROM "bookings" LIMIT 1[0m
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" LIMIT 1[0m
  [4;35;1mBookingItem Load (1.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 3) [0m


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 21:05:53) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"3"}, {"quantity"=>"2"}, {"quantity"=>"0"}]}}

ActionView::MissingTemplate (Missing template bookings/create.erb in view path app/views):
  

Rendering rescues/layout (internal_server_error)


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 21:06:48) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"3"}, {"quantity"=>"2"}, {"quantity"=>"0"}]}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 44ms (View: 22, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 21:07:33) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"3"}, {"quantity"=>"2"}, {"quantity"=>"0"}]}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 110ms (View: 8, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 21:09:47) [GET]
  [4;35;1mPricedItem Load (0.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (13.7ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (1.2ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 21) [0m
Rendered bookings/_booking_item (3.4ms)
Rendered bookings/_form (31.0ms)
Completed in 83ms (View: 33, DB: 1) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 21:10:04) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"0"}, "2"=>{"quantity"=>"0"}, "5"=>{"quantity"=>"0"}}}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 33ms (View: 9, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 22:38:28) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"5"}, "2"=>{"quantity"=>"0"}, "5"=>{"quantity"=>"0"}}}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 43ms (View: 17, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 22:39:12) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"8"}, "2"=>{"quantity"=>"0"}, "5"=>{"quantity"=>"0"}}}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 82ms (View: 69, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 22:40:14) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"16", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"10"}, "2"=>{"quantity"=>"0"}, "5"=>{"quantity"=>"0"}}}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 26ms (View: 7, DB: 0) | 200 OK [http://localhost/bookings]
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateItemTypes (20090807142132)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mDROP TABLE "item_types"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20090807142132'[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("priced_items")[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreatePricedItems (20090807141552)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mDROP TABLE "priced_items"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20090807141552'[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookingItems (20090807141237)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (1.2ms)[0m   [0mDROP TABLE "booking_items"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20090807141237'[0m
  [4;35;1mSQL (0.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookings (20090807134934)
Migrating to CreateBookingItems (20090807141237)
  [4;36;1mSQL (0.2ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCREATE TABLE "booking_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "booking_id" integer, "priced_item_id" integer, "quantity" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807141237')[0m
Migrating to CreatePricedItems (20090807141552)
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "priced_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "item_type_id" integer, "price" decimal(8,2) DEFAULT 0, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807141552')[0m
Migrating to CreateItemTypes (20090807142132)
  [4;35;1mSQL (0.4ms)[0m   [0mCREATE TABLE "item_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "total" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090807142132')[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.6ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("item_types")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("priced_items")[0m


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 22:47:34) [GET]
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
Rendered bookings/_form (22.2ms)
Completed in 110ms (View: 34, DB: 0) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 22:47:39) [GET]
  [4;36;1mBooking Load (1.5ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 51ms (View: 14, DB: 1) | 200 OK [http://localhost/bookings]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 22:48:08) [GET]
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 73ms (View: 3, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 22:48:10) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.1ms)
Completed in 38ms (View: 5, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 22:48:20) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Family Room", "total"=>"1"}}
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'Family Room') LIMIT 1[0m
  [4;35;1mItemType Create (0.8ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Family Room', '2009-08-08 21:48:20', '2009-08-08 21:48:20', 1)[0m
Redirected to http://localhost:3000/admin/item_types/1
Completed in 47ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 22:48:20) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 56ms (View: 4, DB: 1) | 200 OK [http://localhost/admin/item_types/1]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 22:48:22) [GET]
  [4;35;1mItemType Load (1.5ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 68ms (View: 12, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 22:48:23) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.3ms)
Completed in 147ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 22:48:55) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk Room", "total"=>"2"}}
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'Bunk Room') LIMIT 1[0m
  [4;35;1mItemType Create (0.8ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk Room', '2009-08-08 21:48:55', '2009-08-08 21:48:55', 2)[0m
Redirected to http://localhost:3000/admin/item_types/2
Completed in 79ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 22:48:55) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 53ms (View: 3, DB: 1) | 200 OK [http://localhost/admin/item_types/2]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 22:48:57) [GET]
  [4;35;1mItemType Load (1.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 95ms (View: 12, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 22:48:59) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (2.3ms)
Completed in 38ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 22:49:08) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'Bunk') LIMIT 1[0m
  [4;35;1mItemType Create (0.8ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-08 21:49:08', '2009-08-08 21:49:08', 10)[0m
Redirected to http://localhost:3000/admin/item_types/3
Completed in 53ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 22:49:08) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 38ms (View: 3, DB: 0) | 200 OK [http://localhost/admin/item_types/3]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 22:49:10) [GET]
  [4;35;1mItemType Load (0.9ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 40ms (View: 6, DB: 1) | 200 OK [http://localhost/admin/item_types]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:49:26) [GET]
  [4;36;1mPricedItem Load (1.0ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 96ms (View: 20, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 22:49:27) [GET]
  [4;35;1mItemType Load (1.3ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (12.8ms)
Completed in 159ms (View: 33, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 22:49:38) [POST]
  Parameters: {"priced_item"=>{"price"=>"40", "name"=>"Family Room", "item_type_id"=>"1"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT "priced_items".id FROM "priced_items" WHERE ("priced_items"."name" = 'Family Room') LIMIT 1[0m
  [4;36;1mPricedItem Create (0.5ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Family Room', 40.0, '2009-08-08 21:49:38', '2009-08-08 21:49:38', 1)[0m
Redirected to http://localhost:3000/admin/priced_items/1
Completed in 54ms (DB: 1) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 22:49:38) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 42ms (View: 9, DB: 0) | 200 OK [http://localhost/admin/priced_items/1]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:49:41) [GET]
  [4;36;1mPricedItem Load (1.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 107ms (View: 20, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 22:49:44) [GET]
  [4;35;1mItemType Load (1.2ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (12.0ms)
Completed in 82ms (View: 19, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 22:50:18) [POST]
  Parameters: {"priced_item"=>{"price"=>"40", "name"=>"4-Bunk Room", "item_type_id"=>"2"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
  [4;35;1mPricedItem Load (0.2ms)[0m   [0mSELECT "priced_items".id FROM "priced_items" WHERE ("priced_items"."name" = '4-Bunk Room') LIMIT 1[0m
  [4;36;1mPricedItem Create (0.3ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('4-Bunk Room', 40.0, '2009-08-08 21:50:18', '2009-08-08 21:50:18', 2)[0m
Redirected to http://localhost:3000/admin/priced_items/2
Completed in 35ms (DB: 1) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 22:50:19) [GET]
  Parameters: {"id"=>"2"}
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 41ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/priced_items/2]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:50:21) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 96ms (View: 22, DB: 2) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 22:50:22) [GET]
  [4;35;1mItemType Load (1.2ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (11.4ms)
Completed in 82ms (View: 18, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 22:50:42) [POST]
  Parameters: {"priced_item"=>{"price"=>"60", "name"=>"6-Bunk Room", "item_type_id"=>"2"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" [0m
  [4;35;1mPricedItem Load (0.2ms)[0m   [0mSELECT "priced_items".id FROM "priced_items" WHERE ("priced_items"."name" = '6-Bunk Room') LIMIT 1[0m
  [4;36;1mPricedItem Create (0.4ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('6-Bunk Room', 60.0, '2009-08-08 21:50:42', '2009-08-08 21:50:42', 2)[0m
Redirected to http://localhost:3000/admin/priced_items/3
Completed in 130ms (DB: 1) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 22:50:42) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 42ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/priced_items/3]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:50:44) [GET]
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 50ms (View: 9, DB: 1) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 22:50:46) [GET]
  [4;35;1mItemType Load (1.2ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (11.4ms)
Completed in 89ms (View: 18, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 22:50:56) [POST]
  Parameters: {"priced_item"=>{"price"=>"12", "name"=>"Bunk - Adult", "item_type_id"=>"3"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (4.6ms)[0m   [0;1mSELECT * FROM "item_types" [0m
  [4;35;1mPricedItem Load (0.2ms)[0m   [0mSELECT "priced_items".id FROM "priced_items" WHERE ("priced_items"."name" = 'Bunk - Adult') LIMIT 1[0m
  [4;36;1mPricedItem Create (0.4ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Bunk - Adult', 12.0, '2009-08-08 21:50:56', '2009-08-08 21:50:56', 3)[0m
Redirected to http://localhost:3000/admin/priced_items/4
Completed in 129ms (DB: 5) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 22:50:56) [GET]
  Parameters: {"id"=>"4"}
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 41ms (View: 5, DB: 0) | 200 OK [http://localhost/admin/priced_items/4]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:50:57) [GET]
  [4;36;1mPricedItem Load (2.6ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 78ms (View: 27, DB: 3) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#new (for 127.0.0.1 at 2009-08-08 22:50:59) [GET]
  [4;35;1mItemType Load (0.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/priced_items/new
Rendered admin/priced_items/_form (4.2ms)
Completed in 54ms (View: 7, DB: 1) | 200 OK [http://localhost/admin/priced_items/new]


Processing Admin::PricedItemsController#create (for 127.0.0.1 at 2009-08-08 22:51:13) [POST]
  Parameters: {"priced_item"=>{"price"=>"8", "name"=>"Bunk - Under-16", "item_type_id"=>"3"}, "commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0="}
  [4;36;1mItemType Load (1.3ms)[0m   [0;1mSELECT * FROM "item_types" [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT "priced_items".id FROM "priced_items" WHERE ("priced_items"."name" = 'Bunk - Under-16') LIMIT 1[0m
  [4;36;1mPricedItem Create (0.4ms)[0m   [0;1mINSERT INTO "priced_items" ("name", "price", "created_at", "updated_at", "item_type_id") VALUES('Bunk - Under-16', 8.0, '2009-08-08 21:51:14', '2009-08-08 21:51:14', 3)[0m
Redirected to http://localhost:3000/admin/priced_items/5
Completed in 61ms (DB: 2) | 302 Found [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#show (for 127.0.0.1 at 2009-08-08 22:51:14) [GET]
  Parameters: {"id"=>"5"}
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Rendering template within layouts/application
Rendering admin/priced_items/show
Completed in 40ms (View: 6, DB: 0) | 200 OK [http://localhost/admin/priced_items/5]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:51:15) [GET]
  [4;36;1mPricedItem Load (3.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
Completed in 92ms (View: 30, DB: 3) | 200 OK [http://localhost/admin/priced_items]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 22:52:31) [GET]
  [4;35;1mPricedItem Load (3.1ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;35;1mItemType Load (1.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Completed in 120ms (View: 69, DB: 5) | 200 OK [http://localhost/admin/priced_items]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 22:53:25) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 102ms (View: 13, DB: 2) | 200 OK [http://localhost/bookings/]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 22:53:29) [GET]
  Parameters: {"id"=>"3"}
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 3) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 51ms (View: 8, DB: 1) | 200 OK [http://localhost/bookings/3]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 22:53:31) [GET]
  Parameters: {"id"=>"3"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 3) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (61.3ms)
Rendered rescues/_request_and_response (2.0ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 22:53:35) [GET]
  [4;36;1mBooking Load (1.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 31ms (View: 5, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 22:53:38) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"3"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 3) [0m
  [4;36;1mBooking Destroy (0.3ms)[0m   [0;1mDELETE FROM "bookings" WHERE "id" = 3[0m
Redirected to http://localhost:3000/bookings
Completed in 36ms (DB: 1) | 302 Found [http://localhost/bookings/3]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 22:53:38) [GET]
  [4;35;1mBooking Load (0.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 20ms (View: 2, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 22:53:39) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `priced_item_id=' for :booking_item:Symbol) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% :booking_item.priced_item_id = priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (140.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 22:54:53) [GET]
  [4;36;1mPricedItem Load (2.0ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_booking_item46html46erb_locals_booking_item_booking_item_counter_object_priced_item RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:10: syntax error, unexpected '=', expecting kEND
...oking_item, :priced_item_id] = priced_item.id ; @output_buff...
                              ^
Function body:           def _run_erb_app47views47bookings47_booking_item46html46erb_locals_booking_item_booking_item_counter_object_priced_item(local_assigns)
            old_output_buffer = output_buffer;priced_item = local_assigns[:priced_item];booking_item = local_assigns[:booking_item];object = local_assigns[:object];booking_item_counter = local_assigns[:booking_item_counter];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "    ";  new_or_existing = booking_item.new_record? ? 'new' : 'exisiting' ; @output_buffer.concat "\n    "
;  prefix = "booking[#{new_or_existing}_booking_item_attributes][#{priced_item.id}]" ; @output_buffer.concat "\n\n    "

;  fields_for prefix, booking_item do |bi_form| ; @output_buffer.concat "\n\n    <p>\n      "


; @output_buffer.concat(( bi_form.select(:quantity,(0..priced_item.item_type.total)) ).to_s); @output_buffer.concat " x "; @output_buffer.concat((h priced_item.name ).to_s); @output_buffer.concat "\n    </p>\n\n    "


;  [:booking_item, :priced_item_id] = priced_item.id ; @output_buffer.concat "\n\n    "

;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:16:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:221:in `render_partial_collection'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_collection.rb:368:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `map'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `send'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_collection.rb:368:in `method_missing'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:216:in `render_partial_collection'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:182:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:13:in `_run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:12:in `each'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:12:in `_run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:10: syntax error, unexpected '=', expecting kEND
...oking_item, :priced_item_id] = priced_item.id ; @output_buff...
                              ^) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% [:booking_item, :priced_item_id] = priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:16:in `compile!'
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (154.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 22:55:14) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.2ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (0.9ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (31.9ms)
Completed in 146ms (View: 33, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 22:56:08) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"15", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"1"}, "2"=>{"quantity"=>"0"}, "3"=>{"quantity"=>"0"}, "4"=>{"quantity"=>"5"}, "5"=>{"quantity"=>"0"}}}}
Rendering template within layouts/application
Rendering bookings/create
Completed in 49ms (View: 22, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:00:04) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"15", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>{"1"=>{"quantity"=>"1"}, "2"=>{"quantity"=>"0"}, "3"=>{"quantity"=>"0"}, "4"=>{"quantity"=>"5"}, "5"=>{"quantity"=>"0"}}}}

NoMethodError (undefined method `stringify_keys!' for "1":String):
  app/models/booking.rb:7:in `new_booking_item_attributes='
  app/models/booking.rb:6:in `each'
  app/models/booking.rb:6:in `new_booking_item_attributes='
  app/controllers/bookings_controller.rb:47:in `new'
  app/controllers/bookings_controller.rb:47:in `create'

Rendered rescues/_trace (52.9ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:00:22) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.0ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (0.9ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (32.6ms)
Completed in 141ms (View: 34, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:00:32) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"15", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1"}, {"quantity"=>"0"}, {"quantity"=>"0"}, {"quantity"=>"4"}, {"quantity"=>"2"}]}}
  [4;35;1mBooking Create (0.3ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-15', '2009-08-08 22:00:32', '2009-08-08 22:00:32', '2009-08-08')[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:00:33', 1, '2009-08-08 22:00:33', 4, NULL)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:00:33', 0, '2009-08-08 22:00:33', 4, NULL)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:00:33', 0, '2009-08-08 22:00:33', 4, NULL)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:00:33', 4, '2009-08-08 22:00:33', 4, NULL)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:00:33', 2, '2009-08-08 22:00:33', 4, NULL)[0m
Redirected to http://localhost:3000/bookings/4
Completed in 70ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:00:33) [GET]
  Parameters: {"id"=>"4"}
  [4;35;1mBooking Load (0.2ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 4) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 19ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/4]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:01:56) [GET]
  [4;36;1mBooking Load (1.5ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 52ms (View: 14, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:01:58) [GET]
  [4;35;1mPricedItem Load (0.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `priced_item_id=' for :booking_item:Symbol) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% :booking_item.priced_item_id = priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (148.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:02:32) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.3ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (1.1ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (32.9ms)
Completed in 65ms (View: 35, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:02:40) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1"}, {"quantity"=>"0"}, {"quantity"=>"0"}, {"quantity"=>"3"}, {"quantity"=>"2"}]}}
  [4;35;1mBooking Create (0.7ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:02:40', '2009-08-08 22:02:40', '2009-08-08')[0m
  [4;36;1mBookingItem Create (0.4ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:02:40', 1, '2009-08-08 22:02:40', 5, NULL)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:02:40', 0, '2009-08-08 22:02:40', 5, NULL)[0m
  [4;36;1mBookingItem Create (0.1ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:02:40', 0, '2009-08-08 22:02:40', 5, NULL)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:02:40', 3, '2009-08-08 22:02:40', 5, NULL)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:02:40', 2, '2009-08-08 22:02:40', 5, NULL)[0m
Redirected to http://localhost:3000/bookings/5
Completed in 94ms (DB: 2) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:02:40) [GET]
  Parameters: {"id"=>"5"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 5) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 20ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/5]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:03:26) [GET]
  [4;36;1mBooking Load (1.7ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 56ms (View: 17, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:03:28) [GET]
  [4;35;1mPricedItem Load (1.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `priced_item_id=' for #<ActionView::Helpers::FormBuilder:0xb70395a0>) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% bi_form.priced_item_id = priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (142.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:03:58) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `priced_item_id' for #<ActionView::Helpers::FormBuilder:0xb6fe04b4>) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <% bi_form.priced_item_id.build = priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (146.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:06:42) [GET]
  [4;35;1mPricedItem Load (1.3ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined local variable or method `f' for #<ActionView::Base:0xb6fdee0c>) on line #10 of app/views/bookings/_booking_item.html.erb:
7:       <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
8:     </p>
9: 
10:     <%= f.hidden_field :priced_item_id, :value => priced_item.id %>
11: 
12:     <% end %>

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (100.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:06:56) [GET]
  [4;35;1mPricedItem Load (1.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (77.9ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.8ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (1.0ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (105.1ms)
Completed in 167ms (View: 109, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:07:11) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"1", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"3", "priced_item_id"=>"5"}]}}
  [4;35;1mBooking Create (0.3ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:07:11', '2009-08-08 22:07:11', '2009-08-08')[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:07:11', 1, '2009-08-08 22:07:11', 6, 1)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:07:11', 0, '2009-08-08 22:07:11', 6, 2)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:07:11', 1, '2009-08-08 22:07:11', 6, 3)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:07:11', 3, '2009-08-08 22:07:11', 6, 4)[0m
  [4;36;1mBookingItem Create (0.1ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:07:11', 3, '2009-08-08 22:07:11', 6, 5)[0m
Redirected to http://localhost:3000/bookings/6
Completed in 78ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:07:11) [GET]
  Parameters: {"id"=>"6"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 6) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 18ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/6]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:07:21) [GET]
  [4;36;1mBooking Load (2.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 59ms (View: 20, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:07:23) [GET]
  Parameters: {"id"=>"6"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 6) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 134ms (View: 8, DB: 1) | 200 OK [http://localhost/bookings/6]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:07:27) [GET]
  Parameters: {"id"=>"6"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 6) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (61.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:09:15) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 127ms (View: 19, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:09:16) [GET]
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.1ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (1.0ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (36.5ms)
Completed in 104ms (View: 40, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:09:24) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}

NoMethodError (undefined method `quantity' for {"quantity"=>"1", "priced_item_id"=>"1"}:HashWithIndifferentAccess):
  app/models/booking.rb:7:in `new_booking_item_attributes='
  app/models/booking.rb:6:in `each'
  app/models/booking.rb:6:in `new_booking_item_attributes='
  app/controllers/bookings_controller.rb:47:in `new'
  app/controllers/bookings_controller.rb:47:in `create'

Rendered rescues/_trace (71.9ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:10:13) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.5ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (0.9ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (31.0ms)
Completed in 62ms (View: 32, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:10:15) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}

ArgumentError (comparison of String with 0 failed):
  app/models/booking.rb:7:in `<='
  app/models/booking.rb:7:in `new_booking_item_attributes='
  app/models/booking.rb:6:in `each'
  app/models/booking.rb:6:in `new_booking_item_attributes='
  app/controllers/bookings_controller.rb:47:in `new'
  app/controllers/bookings_controller.rb:47:in `create'

Rendered rescues/_trace (106.8ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:10:36) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Create (0.3ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:10:36', '2009-08-08 22:10:36', '2009-08-08')[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:10:36', 1, '2009-08-08 22:10:36', 7, 1)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:10:36', 1, '2009-08-08 22:10:36', 7, 2)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:10:36', 3, '2009-08-08 22:10:36', 7, 4)[0m
Redirected to http://localhost:3000/bookings/7
Completed in 137ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:10:36) [GET]
  Parameters: {"id"=>"7"}
  [4;36;1mBooking Load (0.4ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 7) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 21ms (View: 4, DB: 0) | 200 OK [http://localhost/bookings/7]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:10:38) [GET]
  [4;35;1mBooking Load (2.1ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 56ms (View: 21, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:11:33) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (15.1ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (1.1ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (47.0ms)
Completed in 117ms (View: 52, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:11:41) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"6", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Create (0.4ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:11:41', '2009-08-08 22:11:41', '2009-08-08')[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:11:41', 1, '2009-08-08 22:11:41', 8, 2)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:11:41', 3, '2009-08-08 22:11:41', 8, 4)[0m
  [4;35;1mBookingItem Create (0.1ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:11:41', 6, '2009-08-08 22:11:41', 8, 5)[0m
Redirected to http://localhost:3000/bookings/8
Completed in 156ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:11:41) [GET]
  Parameters: {"id"=>"8"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 8) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 20ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/8]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:12:35) [GET]
  [4;35;1mBooking Load (2.5ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 66ms (View: 27, DB: 2) | 200 OK [http://localhost/bookings]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 23:29:26) [GET]
  [4;36;1mItemType Load (1.8ms)[0m   [0;1mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 99ms (View: 14, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#destroy (for 127.0.0.1 at 2009-08-08 23:29:30) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"3"}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
  [4;36;1mItemType Destroy (0.6ms)[0m   [0;1mDELETE FROM "item_types" WHERE "id" = 3[0m
Redirected to http://localhost:3000/admin/item_types
Completed in 58ms (DB: 1) | 302 Found [http://localhost/admin/item_types/3]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 23:29:31) [GET]
  [4;35;1mItemType Load (1.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 132ms (View: 81, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#edit (for 127.0.0.1 at 2009-08-08 23:29:34) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendering template within layouts/application
Rendering admin/item_types/edit
Rendered admin/item_types/_form (4.4ms)
Completed in 91ms (View: 21, DB: 1) | 200 OK [http://localhost/admin/item_types/2/edit]


Processing Admin::ItemTypesController#update (for 127.0.0.1 at 2009-08-08 23:29:42) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"2", "item_type"=>{"name"=>"4-Bunk Room", "total"=>"1"}}
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = '4-Bunk Room' AND "item_types".id <> 2) LIMIT 1[0m
  [4;35;1mItemType Update (0.4ms)[0m   [0mUPDATE "item_types" SET "total" = 1, "updated_at" = '2009-08-08 22:29:42', "name" = '4-Bunk Room' WHERE "id" = 2[0m
Redirected to http://localhost:3000/admin/item_types/2
Completed in 52ms (DB: 2) | 302 Found [http://localhost/admin/item_types/2]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 23:29:42) [GET]
  Parameters: {"id"=>"2"}
  [4;36;1mItemType Load (0.2ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 39ms (View: 3, DB: 0) | 200 OK [http://localhost/admin/item_types/2]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 23:29:44) [GET]
  [4;35;1mItemType Load (1.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 138ms (View: 13, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 23:29:45) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (4.3ms)
Completed in 59ms (View: 11, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 23:29:55) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"6-Bunk Room", "total"=>"1"}}
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = '6-Bunk Room') LIMIT 1[0m
  [4;35;1mItemType Create (0.6ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('6-Bunk Room', '2009-08-08 22:29:55', '2009-08-08 22:29:55', 1)[0m
Redirected to http://localhost:3000/admin/item_types/4
Completed in 55ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 23:29:55) [GET]
  Parameters: {"id"=>"4"}
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 70ms (View: 6, DB: 1) | 200 OK [http://localhost/admin/item_types/4]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 23:29:57) [GET]
  [4;35;1mItemType Load (1.8ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 107ms (View: 14, DB: 2) | 200 OK [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#new (for 127.0.0.1 at 2009-08-08 23:30:00) [GET]
Rendering template within layouts/application
Rendering admin/item_types/new
Rendered admin/item_types/_form (1.7ms)
Completed in 40ms (View: 4, DB: 0) | 200 OK [http://localhost/admin/item_types/new]


Processing Admin::ItemTypesController#create (for 127.0.0.1 at 2009-08-08 23:30:08) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "item_type"=>{"name"=>"Bunk", "total"=>"10"}}
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT "item_types".id FROM "item_types" WHERE ("item_types"."name" = 'Bunk') LIMIT 1[0m
  [4;35;1mItemType Create (0.7ms)[0m   [0mINSERT INTO "item_types" ("name", "created_at", "updated_at", "total") VALUES('Bunk', '2009-08-08 22:30:08', '2009-08-08 22:30:08', 10)[0m
Redirected to http://localhost:3000/admin/item_types/5
Completed in 56ms (DB: 1) | 302 Found [http://localhost/admin/item_types]


Processing Admin::ItemTypesController#show (for 127.0.0.1 at 2009-08-08 23:30:08) [GET]
  Parameters: {"id"=>"5"}
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 5) [0m
Rendering template within layouts/application
Rendering admin/item_types/show
Completed in 96ms (View: 6, DB: 1) | 200 OK [http://localhost/admin/item_types/5]


Processing Admin::ItemTypesController#index (for 127.0.0.1 at 2009-08-08 23:30:10) [GET]
  [4;35;1mItemType Load (2.6ms)[0m   [0mSELECT * FROM "item_types" [0m
Rendering template within layouts/application
Rendering admin/item_types/index
Completed in 100ms (View: 16, DB: 3) | 200 OK [http://localhost/admin/item_types]


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 23:30:23) [GET]
  [4;36;1mPricedItem Load (3.4ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;36;1mItemType Load (0.2ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m

ActionView::TemplateError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.name) on line #14 of app/views/admin/priced_items/index.html.erb:
11:   <tr>
12:     <td><%=h priced_item.name %></td>
13:     <td><%=h number_to_currency(priced_item.price, :unit => "£") %></td>
14:     <td><%=h priced_item.item_type.name %></td>
15:     <td><%= link_to 'Show', admin_priced_item_path(priced_item) %></td>
16:     <td><%= link_to 'Edit', edit_admin_priced_item_path(priced_item) %></td>
17:     <td><%= link_to 'Destroy', admin_priced_item_url(priced_item), :confirm => 'Are you sure?', :method => :delete %></td>

    app/views/admin/priced_items/index.html.erb:14
    app/views/admin/priced_items/index.html.erb:10:in `each'
    app/views/admin/priced_items/index.html.erb:10
    app/controllers/admin/priced_items_controller.rb:8:in `index'

Rendered rescues/_trace (61.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::PricedItemsController#index (for 127.0.0.1 at 2009-08-08 23:32:18) [GET]
  [4;35;1mPricedItem Load (3.0ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/priced_items/index
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Completed in 93ms (View: 39, DB: 4) | 200 OK [http://localhost/admin/priced_items]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:43) [GET]
  [4;35;1mBooking Load (1.2ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 29ms (View: 12, DB: 1) | 200 OK [http://localhost/bookings/]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:32:47) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"4"}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 4) [0m
  [4;35;1mBooking Destroy (0.6ms)[0m   [0mDELETE FROM "bookings" WHERE "id" = 4[0m
Redirected to http://localhost:3000/bookings
Completed in 45ms (DB: 1) | 302 Found [http://localhost/bookings/4]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:48) [GET]
  [4;36;1mBooking Load (2.1ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 49ms (View: 20, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:32:49) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"5"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 5) [0m
  [4;36;1mBooking Destroy (0.3ms)[0m   [0;1mDELETE FROM "bookings" WHERE "id" = 5[0m
Redirected to http://localhost:3000/bookings
Completed in 27ms (DB: 1) | 302 Found [http://localhost/bookings/5]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:50) [GET]
  [4;35;1mBooking Load (1.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 31ms (View: 10, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:32:52) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"6"}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 6) [0m
  [4;35;1mBooking Destroy (0.5ms)[0m   [0mDELETE FROM "bookings" WHERE "id" = 6[0m
Redirected to http://localhost:3000/bookings
Completed in 42ms (DB: 1) | 302 Found [http://localhost/bookings/6]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:52) [GET]
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 25ms (View: 8, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:32:54) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"7"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 7) [0m
  [4;36;1mBooking Destroy (0.2ms)[0m   [0;1mDELETE FROM "bookings" WHERE "id" = 7[0m
Redirected to http://localhost:3000/bookings
Completed in 25ms (DB: 0) | 302 Found [http://localhost/bookings/7]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:54) [GET]
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 27ms (View: 7, DB: 1) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:32:56) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"8"}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 8) [0m
  [4;35;1mBooking Destroy (0.6ms)[0m   [0mDELETE FROM "bookings" WHERE "id" = 8[0m
Redirected to http://localhost:3000/bookings
Completed in 46ms (DB: 1) | 302 Found [http://localhost/bookings/8]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:32:56) [GET]
  [4;36;1mBooking Load (0.5ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
Completed in 17ms (View: 2, DB: 0) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:35:16) [GET]
  [4;35;1mPricedItem Load (1.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (51.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (67.1ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (95.8ms)
Completed in 163ms (View: 49, DB: 54) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:35:23) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"3", "priced_item_id"=>"5"}]}}
  [4;35;1mBooking Create (0.3ms)[0m   [0mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:35:23', '2009-08-08 22:35:23', '2009-08-08')[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:35:23', 1, '2009-08-08 22:35:23', 9, 1)[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:35:23', 1, '2009-08-08 22:35:23', 9, 2)[0m
  [4;36;1mBookingItem Create (0.2ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:35:23', 3, '2009-08-08 22:35:23', 9, 5)[0m
Redirected to http://localhost:3000/bookings/9
Completed in 42ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:35:23) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
Completed in 20ms (View: 3, DB: 0) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:35:25) [GET]
  [4;36;1mBooking Load (1.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 98ms (View: 63, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:35:49) [GET]
  [4;35;1mBooking Load (0.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 47ms (View: 29, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:36:39) [GET]
  [4;36;1mBooking Load (1.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 82ms (View: 51, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:38:22) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.5ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 106ms (View: 26, DB: 2) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:38:45) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.7ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 66ms (View: 32, DB: 2) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:40:21) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 85ms (View: 41, DB: 3) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:40:23) [GET]
  [4;36;1mBooking Load (1.1ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 113ms (View: 83, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:41:15) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.4ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (32.5ms)
Completed in 78ms (View: 34, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:41:19) [GET]
  [4;35;1mBooking Load (1.5ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 55ms (View: 25, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:41:21) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.2ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (62.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:42:05) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (121.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:42:10) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (120.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:42:28) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (1.1ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.5ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_booking_item (0.6ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.2ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.6ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.2ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.6ms)
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
Rendered bookings/_booking_item (0.8ms)
Rendered bookings/_booking_item (0.7ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_form (74.7ms)
Completed in 132ms (View: 79, DB: 6) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:42:40) [GET]
  [4;35;1mBooking Load (1.5ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 135ms (View: 103, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:42:41) [GET]
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.5ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (38.9ms)
Completed in 105ms (View: 43, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:42:43) [GET]
  [4;36;1mBooking Load (3.1ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 65ms (View: 33, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:42:45) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.2ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.1ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.5ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.6ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.5ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.0ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_booking_item (0.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_form (48.4ms)
Completed in 76ms (View: 51, DB: 3) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:44:29) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (22.8ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.5ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.6ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
Rendered bookings/_booking_item (0.5ms)
Rendered bookings/_booking_item (0.5ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
Rendered bookings/_booking_item (0.7ms)
Rendered bookings/_booking_item (0.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_booking_item (10.7ms)
Rendered bookings/_booking_item (0.9ms)
Rendered bookings/_form (142.5ms)
Completed in 198ms (View: 147, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:47:34) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 79ms (View: 44, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:47:37) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (14.2ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (45.6ms)
Completed in 115ms (View: 50, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:47:40) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"12", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Create (0.3ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-12', '2009-08-08 22:47:40', '2009-08-08 22:47:40', '2009-08-08')[0m
Redirected to http://localhost:3000/bookings/10
Completed in 26ms (DB: 0) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:47:40) [GET]
  Parameters: {"id"=>"10"}
  [4;35;1mBooking Load (0.2ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 10) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Completed in 26ms (View: 9, DB: 0) | 200 OK [http://localhost/bookings/10]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:47:42) [GET]
  [4;35;1mBooking Load (2.1ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Completed in 96ms (View: 62, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:47:44) [GET]
  Parameters: {"id"=>"10"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 10) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.7ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Rendered bookings/_form (35.3ms)
Completed in 101ms (View: 43, DB: 3) | 200 OK [http://localhost/bookings/10/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:47:50) [GET]
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Completed in 47ms (View: 30, DB: 2) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:48:06) [GET]
  Parameters: {"id"=>"10"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 10) [0m
  [4;35;1mPricedItem Load (1.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Rendered bookings/_form (35.0ms)
Completed in 99ms (View: 42, DB: 3) | 200 OK [http://localhost/bookings/10/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:48:09) [GET]
  [4;35;1mBooking Load (2.1ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (2.1ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.9ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 10) [0m
Completed in 163ms (View: 68, DB: 7) | 200 OK [http://localhost/bookings]


Processing BookingsController#destroy (for 127.0.0.1 at 2009-08-08 23:48:12) [DELETE]
  Parameters: {"authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"10"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 10) [0m
  [4;36;1mBooking Destroy (0.3ms)[0m   [0;1mDELETE FROM "bookings" WHERE "id" = 10[0m
Redirected to http://localhost:3000/bookings
Completed in 38ms (DB: 1) | 302 Found [http://localhost/bookings/10]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:48:12) [GET]
  [4;35;1mBooking Load (0.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 56ms (View: 34, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:48:13) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.6ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (30.4ms)
Completed in 62ms (View: 32, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-08 23:48:17) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Create (0.4ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-08', '2009-08-08 22:48:17', '2009-08-08 22:48:17', '2009-08-08')[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-08 22:48:17', 1, '2009-08-08 22:48:17', 11, 1)[0m
Redirected to http://localhost:3000/bookings/11
Completed in 35ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:48:17) [GET]
  Parameters: {"id"=>"11"}
  [4;36;1mBooking Load (0.2ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Completed in 36ms (View: 20, DB: 1) | 200 OK [http://localhost/bookings/11]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:48:19) [GET]
  [4;35;1mBooking Load (1.7ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (2.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Completed in 78ms (View: 42, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:48:21) [GET]
  Parameters: {"id"=>"11"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (13.0ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (98.5ms)
Completed in 156ms (View: 104, DB: 4) | 200 OK [http://localhost/bookings/11/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-08 23:48:25) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"11", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "exisiting_booking_item_attributes"=>{"25"=>{"quantity"=>"1", "priced_item_id"=>"5"}}, "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8"}}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m

ActiveRecord::UnknownAttributeError (unknown attribute: exisiting_booking_item_attributes):
  app/controllers/bookings_controller.rb:67:in `update'
  app/controllers/bookings_controller.rb:66:in `update'

Rendered rescues/_trace (78.5ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#update (for 127.0.0.1 at 2009-08-08 23:49:54) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"11", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "exisiting_booking_item_attributes"=>{"25"=>{"quantity"=>"1", "priced_item_id"=>"5"}}, "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8"}}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m

ActiveRecord::UnknownAttributeError (unknown attribute: exisiting_booking_item_attributes):
  app/controllers/bookings_controller.rb:67:in `update'
  app/controllers/bookings_controller.rb:66:in `update'

Rendered rescues/_trace (106.1ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-08 23:51:20) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (30.9ms)
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (8.1ms)
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (4.8ms)
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.0ms)
Rendered bookings/_form (78.5ms)
Completed in 154ms (View: 81, DB: 4) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-08 23:51:24) [GET]
  Parameters: {"id"=>"11"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (12.3ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (98.4ms)
Completed in 140ms (View: 100, DB: 3) | 200 OK [http://localhost/bookings/11/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-08 23:51:26) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"5IcVQzDCo69eWkA+yrWRsV1+Agrb/74QdeEbWklJuU0=", "id"=>"11", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"8", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "existing_booking_item_attributes"=>{"25"=>{"quantity"=>"1", "priced_item_id"=>"5"}}}}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mBookingItem Update (0.3ms)[0m   [0;1mUPDATE "booking_items" SET "updated_at" = '2009-08-08 22:51:26', "priced_item_id" = 5 WHERE "id" = 25[0m
Redirected to http://localhost:3000/bookings/11
Completed in 52ms (DB: 1) | 302 Found [http://localhost/bookings/11]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-08 23:51:26) [GET]
  Parameters: {"id"=>"11"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 11) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 38ms (View: 21, DB: 1) | 200 OK [http://localhost/bookings/11]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-08 23:51:31) [GET]
  [4;36;1mBooking Load (1.6ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 135ms (View: 91, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 12:46:36) [GET]
  [4;36;1mBooking Load (2.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (1.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.9ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 793ms (View: 581, DB: 7) | 200 OK [http://localhost/]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 12:46:48) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mBooking Load (0.2ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 1) [0m

ActiveRecord::RecordNotFound (Couldn't find Booking with ID=1):
  app/controllers/bookings_controller.rb:16:in `show'

Rendered rescues/_trace (57.6ms)
Rendered rescues/_request_and_response (1.8ms)
Rendering rescues/layout (not_found)


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 12:46:52) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 127ms (View: 82, DB: 4) | 200 OK [http://localhost/bookings/9]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-09 12:46:58) [GET]
  Parameters: {"booking_id"=>"9"}

NameError (uninitialized constant BookingItemsController):
  

Rendered rescues/_trace (100.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingItemsController#index (for 127.0.0.1 at 2009-08-09 12:51:41) [GET]
  Parameters: {"booking_id"=>"9"}
  [4;35;1mBookingItem Load (2.4ms)[0m   [0mSELECT * FROM "booking_items" [0m
Rendering template within layouts/application
Rendering booking_items/index
Completed in 39ms (View: 8, DB: 2) | 200 OK [http://localhost/bookings/9/booking_items]


Processing BookingItemsController#index (for 127.0.0.1 at 2009-08-09 12:55:15) [GET]
  Parameters: {"booking_id"=>"9"}
  [4;36;1mBookingItem Load (2.3ms)[0m   [0;1mSELECT * FROM "booking_items" [0m
Rendering template within layouts/application
Rendering booking_items/index
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m

ActionView::TemplateError (undefined method `booking_item_path' for #<ActionView::Base:0xb704a0bc>) on line #15 of app/views/booking_items/index.html.erb:
12:     <td><%=h booking_item.booking_id %></td>
13:     <td><%=h booking_item.priced_item.name %></td>
14:     <td><%=h booking_item.quantity %></td>
15:     <td><%= link_to 'Show', booking_item %></td>
16:     <td><%= link_to 'Edit', edit_booking_item_path(booking) %></td>
17:     <td><%= link_to 'Destroy', booking_item, :confirm => 'Are you sure?', :method => :delete %></td>
18:   </tr>

    app/views/booking_items/index.html.erb:15
    app/views/booking_items/index.html.erb:10:in `each'
    app/views/booking_items/index.html.erb:10
    app/controllers/booking_items_controller.rb:6:in `index'

Rendered rescues/_trace (112.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingItemsController#index (for 127.0.0.1 at 2009-08-09 13:17:50) [GET]
  Parameters: {"booking_id"=>"9"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mBookingItem Load (0.7ms)[0m   [0mSELECT * FROM "booking_items" [0m
Rendering template within layouts/application
Rendering booking_items/index
  [4;36;1mPricedItem Load (0.5ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m

ActionView::TemplateError (undefined method `booking_item_path' for #<ActionView::Base:0xb70c7148>) on line #15 of app/views/booking_items/index.html.erb:
12:     <td><%=h booking_item.booking_id %></td>
13:     <td><%=h booking_item.priced_item.name %></td>
14:     <td><%=h booking_item.quantity %></td>
15:     <td><%= link_to 'Show', booking_item %></td>
16:     <td><%= link_to 'Edit', edit_booking_item_path(booking) %></td>
17:     <td><%= link_to 'Destroy', booking_item, :confirm => 'Are you sure?', :method => :delete %></td>
18:   </tr>

    app/views/booking_items/index.html.erb:15
    app/views/booking_items/index.html.erb:10:in `each'
    app/views/booking_items/index.html.erb:10
    app/controllers/booking_items_controller.rb:8:in `index'

Rendered rescues/_trace (122.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingItemsController#index (for 127.0.0.1 at 2009-08-09 13:32:20) [GET]
  Parameters: {"booking_id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mBookingItem Load (0.9ms)[0m   [0;1mSELECT * FROM "booking_items" [0m
Rendering template within layouts/application
Rendering booking_items/index
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 71ms (View: 32, DB: 3) | 200 OK [http://localhost/bookings/9/booking_items]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 14:23:09) [GET]
  [4;35;1mBooking Load (1.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 83ms (View: 49, DB: 5) | 200 OK [http://localhost/bookings/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:23:12) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (63.9ms)
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (7.6ms)
  [4;35;1mItemType Load (0.8ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (7.5ms)
  [4;36;1mItemType Load (0.8ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (7.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.0ms)
Rendered bookings/_form (383.8ms)
Completed in 478ms (View: 390, DB: 4) | 200 OK [http://localhost/bookings/new]
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" LIMIT 1[0m
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" LIMIT 1[0m
  [4;36;1mBookingItem Load (1.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mBookingItem Load (0.8ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:35:47) [GET]
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (undefined method `booking_item' for #<Booking:0xb6f82fbc>) on line #13 of app/views/bookings/_form.html.erb:
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <%= render :partial => "booking_item", :collection => @booking.booking_item.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  %>
14:   <% end %>
15: 
16:   <p>

    app/views/bookings/_form.html.erb:13
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (131.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:37:14) [GET]
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.1ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (22.8ms)
Completed in 92ms (View: 31, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:37:59) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (23.1ms)
Completed in 144ms (View: 27, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:38:17) [GET]
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (28.8ms)
Completed in 100ms (View: 36, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:40:13) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (29.5ms)
Completed in 61ms (View: 31, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 14:40:17) [GET]
  [4;35;1mBooking Load (1.6ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 84ms (View: 52, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:40:19) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (32.8ms)
Completed in 66ms (View: 34, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:44:00) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    "
;  pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) ; @output_buffer.concat "\n    "
;  if pass_coll.nil? do pass_coll = @booking.booking_items.build() ; @output_buffer.concat "\n    <p>"
; @output_buffer.concat(( debug(priced_item) ).to_s); @output_buffer.concat "</p>\n    "
; @output_buffer.concat(( render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  ).to_s); @output_buffer.concat "\n  "
;  end ; @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND) on line #23 of app/views/bookings/_form.html.erb:
20:     <%= f.submit button_text %>
21:   </p>

    app/views/bookings/_form.html.erb:25:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (123.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:44:12) [GET]
  [4;35;1mPricedItem Load (1.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    "
;  pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) ; @output_buffer.concat "\n    "
;  if pass_coll.nil? do pass_coll = @booking.booking_items.build() end ; @output_buffer.concat "\n    <p>"
; @output_buffer.concat(( debug(priced_item) ).to_s); @output_buffer.concat "</p>\n    "
; @output_buffer.concat(( render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  ).to_s); @output_buffer.concat "\n  "
;  end ; @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND) on line #23 of app/views/bookings/_form.html.erb:
20:     <%= f.submit button_text %>
21:   </p>

    app/views/bookings/_form.html.erb:25:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (123.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:45:15) [GET]
  [4;36;1mPricedItem Load (2.1ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (42.6ms)
Completed in 116ms (View: 52, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:47:02) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:14: syntax error, unexpected kEND, expecting kTHEN or ':' or '\n' or ';'
...king.booking_items.build() end ; @output_buffer.concat "\n  ...
                              ^
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    "
;  pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) ; @output_buffer.concat "\n    "
;  if pass_coll.nil? pass_coll = @booking.booking_items.build() end ; @output_buffer.concat "\n    <p>"
; @output_buffer.concat(( debug(priced_item) ).to_s); @output_buffer.concat "</p>\n    "
; @output_buffer.concat(( render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  ).to_s); @output_buffer.concat "\n  "
;  end ; @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:14: syntax error, unexpected kEND, expecting kTHEN or ':' or '\n' or ';'
...king.booking_items.build() end ; @output_buffer.concat "\n  ...
                              ^) on line #14 of app/views/bookings/_form.html.erb:
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <% pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) %>
14:     <% if pass_coll.nil? pass_coll = @booking.booking_items.build() end %>
15:     <p><%= debug(priced_item) %></p>
16:     <%= render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  %>
17:   <% end %>

    app/views/bookings/_form.html.erb:25:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (66.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:47:15) [GET]
  [4;36;1mPricedItem Load (1.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
ERROR: compiling _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND
Function body:           def _run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object(local_assigns)
            old_output_buffer = output_buffer;form = local_assigns[:form];f = local_assigns[:f];object = local_assigns[:object];button_text = local_assigns[:button_text];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "  "; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :arrival ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :arrival, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :departure ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 ).to_s); @output_buffer.concat "\n  </p>\n\n  "


;  @priced_items.each do |priced_item| ; @output_buffer.concat "\n    "
;  pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) ; @output_buffer.concat "\n    "
;  if pass_coll.nil? pass_coll = @booking.booking_items.build() ; @output_buffer.concat "\n    <p>"
; @output_buffer.concat(( debug(priced_item) ).to_s); @output_buffer.concat "</p>\n    "
; @output_buffer.concat(( render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  ).to_s); @output_buffer.concat "\n  "
;  end ; @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.submit button_text ).to_s); @output_buffer.concat "\n  </p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:4:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/new.html.erb:3:in `_run_erb_app47views47bookings47new46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:31:in `new'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:23: syntax error, unexpected kENSURE, expecting kEND
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:25: syntax error, unexpected $end, expecting kEND) on line #23 of app/views/bookings/_form.html.erb:
20:     <%= f.submit button_text %>
21:   </p>

    app/views/bookings/_form.html.erb:25:in `compile!'
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (137.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:48:10) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
Rendered bookings/_form (86.9ms)
Completed in 135ms (View: 90, DB: 2) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 14:48:29) [GET]
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m

ActionView::TemplateError (undefined method `map' for #<BookingItem:0xb706d6c0>) on line #16 of app/views/bookings/_form.html.erb:
13:     <% pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) %>
14:     <% pass_coll ||= @booking.booking_items.build() %>
15:     <p><%= debug(priced_item) %></p>
16:     <%= render :partial => "booking_item", :collection => pass_coll, :locals => { :priced_item => priced_item }  %>
17:   <% end %>
18: 
19:   <p>

    app/views/bookings/_form.html.erb:16
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (144.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 14:49:01) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m

ActionView::TemplateError (undefined method `map' for #<BookingItem:0xb70423a8>) on line #16 of app/views/bookings/_form.html.erb:
13:     <% pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) %>
14:     <% pass_coll ||= @booking.booking_items.build() %>
15:     <p><%= debug(priced_item) %></p>
16:     <%= render :partial => "booking_item", :collection => @booking.booking_items.find_by_priced_item_id(priced_item), :locals => { :priced_item => priced_item }  %>
17:   <% end %>
18: 
19:   <p>

    app/views/bookings/_form.html.erb:16
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (121.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 14:56:16) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb710f8a8>) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:     <%= render :partial => "booking_item", :collection => @booking.booking_items, :locals => { :priced_item => priced_item }  %>
13:   <% @priced_items.each do |priced_item| %>
14:     <% pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) %>
15:     <% pass_coll ||= @booking.booking_items.build() %>

    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (65.5ms)
Rendered rescues/_request_and_response (1.1ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 14:56:46) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb7139e50>) on line #8 of app/views/bookings/_booking_item.html.erb:
5: <% fields_for prefix, booking_item do |bi_form| %>
6: 
7:   <p>
8:     <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
9:   </p>
10: 
11: <!--// FIXME: must be a neater way to do this! inserting directly into bi_form instead of rendering to browser? !-->

    app/views/bookings/_booking_item.html.erb:8
    app/views/bookings/_booking_item.html.erb:5
    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (134.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 14:58:28) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (1.1ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.7ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
ERROR: compiling _run_erb_app47views47bookings47_booking_item46html46erb_locals_booking_item_booking_item_counter_object RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:12: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:14: syntax error, unexpected kENSURE, expecting ')'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:16: syntax error, unexpected kEND, expecting ')'
Function body:           def _run_erb_app47views47bookings47_booking_item46html46erb_locals_booking_item_booking_item_counter_object(local_assigns)
            old_output_buffer = output_buffer;booking_item_counter = local_assigns[:booking_item_counter];booking_item = local_assigns[:booking_item];object = local_assigns[:object];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<p>inside bi</p>\n"
;  new_or_existing = booking_item.new_record? ? 'new' : 'existing' ; @output_buffer.concat "\n"
;  prefix = "booking[#{new_or_existing}_booking_item_attributes][]" ; @output_buffer.concat "\n\n"

;  fields_for prefix, booking_item do |bi_form| ; @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( bi_form.select(:quantity,(0..10)) # priced_item.item_type.total)) ).to_s); @output_buffer.concat " x "; @output_buffer.concat((h priced_item.name ).to_s); @output_buffer.concat "\n%>\n  </p>\n\n"



;  end ; @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:16:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:221:in `render_partial_collection'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_collection.rb:368:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `map'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `send'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_proxy.rb:219:in `method_missing'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/associations/association_collection.rb:368:in `method_missing'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:216:in `render_partial_collection'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:182:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_form.html.erb:12:in `_run_erb_app47views47bookings47_form46html46erb_locals_button_text_f_form_object'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:20:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:26:in `benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:19:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable_partial.rb:44:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/partials.rb:184:in `render_partial'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:262:in `render'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/edit.html.erb:4:in `_run_erb_app47views47bookings47edit46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:490:in `fields_for'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/edit.html.erb:3:in `_run_erb_app47views47bookings47edit46html46erb'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:34:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:301:in `with_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:30:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:941:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1322:in `default_render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1328:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:12: syntax error, unexpected kEND, expecting ')'
;  end ; @output_buffer.concat "\n"
      ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:14: syntax error, unexpected kENSURE, expecting ')'
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/_booking_item.html.erb:16: syntax error, unexpected kEND, expecting ')') on line #12 of app/views/bookings/_booking_item.html.erb:
9: %>
10:   </p>
11: 
12: <% end %>

    app/views/bookings/_booking_item.html.erb:16:in `compile!'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (127.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:00:00) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (1.0ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
Rendered bookings/_booking_item (0.6ms)
Rendered bookings/_booking_item (0.1ms)
Rendered bookings/_booking_item (0.1ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_form (45.0ms)
Completed in 96ms (View: 49, DB: 4) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:00:53) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.4ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
Rendered bookings/_form (92.9ms)
Completed in 135ms (View: 97, DB: 3) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:01:36) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.5ms)
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
Rendered bookings/_form (45.2ms)
Completed in 153ms (View: 51, DB: 4) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:01:47) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.6ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.1ms)
Rendered bookings/_form (52.8ms)
Completed in 107ms (View: 55, DB: 3) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:02:25) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (3.0ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.7ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.2ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.2ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (0.4ms)
Rendered bookings/_form (110.4ms)
Completed in 177ms (View: 126, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:02:48) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (2.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (3.1ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.5ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.7ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (2.2ms)
Rendered bookings/_form (111.9ms)
Completed in 169ms (View: 117, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:03:26) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (3.2ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.7ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (2.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.8ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.6ms)
Rendered bookings/_form (39.8ms)
Completed in 92ms (View: 44, DB: 4) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:03:29) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (3.7ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (2.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (2.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.9ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
Rendered bookings/_booking_item (1.6ms)
Rendered bookings/_form (43.1ms)
Completed in 145ms (View: 45, DB: 3) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:05:36) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb7047628>) on line #10 of app/views/bookings/_booking_item.html.erb:
7: <% fields_for prefix, booking_item do |bi_form| %>
8: 
9:   <p>
10:     <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x <%=h priced_item.name %>
11:   </p>
12: 
13: <!--// FIXME: must be a neater way to do this! inserting directly into bi_form instead of rendering to browser? !-->

    app/views/bookings/_booking_item.html.erb:10
    app/views/bookings/_booking_item.html.erb:7
    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/edit.html.erb:4
    app/views/bookings/edit.html.erb:3

Rendered rescues/_trace (75.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:06:18) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (99.0ms)
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (5.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (5.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (6.2ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.2ms)
Rendered bookings/_form (156.1ms)
Completed in 189ms (View: 158, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:06:38) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.1ms)
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.6ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (58.0ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (119.4ms)
Completed in 176ms (View: 124, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:06:49) [GET]
  [4;36;1mBooking Load (1.6ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 84ms (View: 51, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:06:51) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (8.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (58.6ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (98.6ms)
Completed in 158ms (View: 99, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 15:07:05) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"19", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"15", "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Create (0.9ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-19', '2009-08-09 14:07:06', '2009-08-09 14:07:06', '2009-08-15')[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 14:07:06', 1, '2009-08-09 14:07:06', 12, 1)[0m
Redirected to http://localhost:3000/bookings/12
Completed in 69ms (DB: 1) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 15:07:06) [GET]
  Parameters: {"id"=>"12"}
  [4;36;1mBooking Load (0.4ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Completed in 39ms (View: 21, DB: 1) | 200 OK [http://localhost/bookings/12]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:07:09) [GET]
  [4;35;1mBooking Load (1.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (1.5ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
Completed in 163ms (View: 73, DB: 7) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:07:15) [GET]
  Parameters: {"id"=>"12"}
  [4;36;1mBooking Load (0.7ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (52.3ms)
Completed in 113ms (View: 56, DB: 5) | 200 OK [http://localhost/bookings/12/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 15:07:20) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"12", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"19", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"15", "existing_booking_item_attributes"=>{"26"=>{"quantity"=>"1", "priced_item_id"=>"1"}}, "new_booking_item_attributes"=>[{"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mBooking Load (0.4ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mBookingItem Create (0.3ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 14:07:20', 1, '2009-08-09 14:07:20', 12, 2)[0m
Redirected to http://localhost:3000/bookings/12
Completed in 40ms (DB: 1) | 302 Found [http://localhost/bookings/12]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 15:07:20) [GET]
  Parameters: {"id"=>"12"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 44ms (View: 24, DB: 2) | 200 OK [http://localhost/bookings/12]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:07:23) [GET]
  [4;35;1mBooking Load (0.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 54ms (View: 33, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 15:09:27) [GET]
  Parameters: {"id"=>"12"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (1.1ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 119ms (View: 36, DB: 2) | 200 OK [http://localhost/bookings/12]


Processing BookingItemsController#index (for 127.0.0.1 at 2009-08-09 15:09:35) [GET]
  Parameters: {"booking_id"=>"12"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;36;1mBookingItem Load (0.9ms)[0m   [0;1mSELECT * FROM "booking_items" [0m
Rendering template within layouts/application
Rendering booking_items/index
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.5ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 58ms (View: 30, DB: 3) | 200 OK [http://localhost/bookings/12/booking_items]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:38:23) [GET]
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 57ms (View: 36, DB: 3) | 200 OK [http://localhost/bookings/]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:44:26) [GET]
  [4;35;1mPricedItem Load (0.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (45.9ms)
Completed in 224ms (View: 46, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:44:43) [GET]
  [4;36;1mBooking Load (1.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 66ms (View: 32, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:48:33) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.2ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (53.2ms)
Completed in 157ms (View: 53, DB: 4) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:48:45) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.5ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.6ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (0.9ms)
Rendered bookings/_form (44.0ms)
Completed in 164ms (View: 44, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:49:03) [GET]
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (14.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.6ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.5ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mBookingItem Load (1.1ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.7ms)
Rendered bookings/_form (56.3ms)
Completed in 114ms (View: 57, DB: 5) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:49:36) [GET]
  [4;35;1mPricedItem Load (1.9ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m

ActionView::TemplateError (undefined method `checkbox' for #<ActionView::Helpers::FormBuilder:0xb719b3a8>) on line #8 of app/views/bookings/_booking_item.html.erb:
5: 
6:   <p>
7:     <% if priced_item.item_type.total == 1 %>
8:     <%= bi_form.checkbox(:quantity, {}, 1, 0) %> x
9:     <% else %>
10:     <%= bi_form.select(:quantity,(0..priced_item.item_type.total)) %> x
11:     <%end %>

    app/views/bookings/_booking_item.html.erb:8
    app/views/bookings/_booking_item.html.erb:4
    app/views/bookings/_form.html.erb:15
    app/views/bookings/_form.html.erb:12:in `each'
    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:31:in `new'

Rendered rescues/_trace (79.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 15:50:09) [GET]
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (47.9ms)
Completed in 82ms (View: 48, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:50:16) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.8ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.6ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (1.6ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (56.4ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (101.4ms)
Completed in 149ms (View: 101, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:50:31) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.2ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.7ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (54.1ms)
Completed in 94ms (View: 55, DB: 4) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:51:45) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (11.2ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (108.8ms)
Completed in 159ms (View: 109, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 15:51:48) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"9", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"12", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "existing_booking_item_attributes"=>{"22"=>{"quantity"=>"1", "priced_item_id"=>"1"}, "23"=>{"quantity"=>"1", "priced_item_id"=>"2"}, "24"=>{"quantity"=>"3", "priced_item_id"=>"5"}}, "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}]}}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mBookingItem Load (1.0ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mBooking Update (0.3ms)[0m   [0mUPDATE "bookings" SET "updated_at" = '2009-08-09 14:51:48', "departure" = '2009-08-12' WHERE "id" = 9[0m
Redirected to http://localhost:3000/bookings/9
Completed in 56ms (DB: 2) | 302 Found [http://localhost/bookings/9]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 15:51:48) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.2ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 99ms (View: 23, DB: 2) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:51:51) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 77ms (View: 41, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 15:51:54) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.6ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (2.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.7ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (52.2ms)
Completed in 169ms (View: 56, DB: 6) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:51:58) [GET]
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 55ms (View: 34, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:54:38) [GET]
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 58ms (View: 38, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:57:22) [GET]
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 65ms (View: 43, DB: 3) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 15:59:30) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (1.2ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 113ms (View: 78, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:00:01) [GET]
  [4;35;1mBooking Load (9.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 174ms (View: 136, DB: 12) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 16:02:22) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (1.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.5ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.6ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (64.8ms)
Completed in 125ms (View: 69, DB: 5) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 16:02:25) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"9", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"12", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "existing_booking_item_attributes"=>{"22"=>{"quantity"=>"1", "priced_item_id"=>"1"}, "23"=>{"quantity"=>"0", "priced_item_id"=>"2"}, "24"=>{"quantity"=>"3", "priced_item_id"=>"5"}}, "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}]}}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mBookingItem Update (0.3ms)[0m   [0mUPDATE "booking_items" SET booking_id = NULL WHERE (booking_id = 9 AND id IN (23)) [0m
Redirected to http://localhost:3000/bookings/9
Completed in 39ms (DB: 1) | 302 Found [http://localhost/bookings/9]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 16:02:25) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.2ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
Completed in 44ms (View: 26, DB: 2) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:02:28) [GET]
  [4;36;1mBooking Load (1.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.1ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.9ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 109ms (View: 70, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 16:02:33) [GET]
  Parameters: {"id"=>"9"}
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.6ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (51.5ms)
Completed in 81ms (View: 52, DB: 4) | 200 OK [http://localhost/bookings/9/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 16:02:37) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"9", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"12", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"8", "existing_booking_item_attributes"=>{"22"=>{"quantity"=>"1", "priced_item_id"=>"1"}, "24"=>{"quantity"=>"3", "priced_item_id"=>"5"}}, "new_booking_item_attributes"=>[{"quantity"=>"0"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}]}}
  [4;35;1mBooking Load (0.7ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
  [4;36;1mBookingItem Load (1.1ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mBookingItem Create (0.4ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 15:02:37', 1, '2009-08-09 15:02:37', 9, 2)[0m
Redirected to http://localhost:3000/bookings/9
Completed in 65ms (DB: 2) | 302 Found [http://localhost/bookings/9]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 16:02:37) [GET]
  Parameters: {"id"=>"9"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 9) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.5ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 108ms (View: 88, DB: 2) | 200 OK [http://localhost/bookings/9]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:02:39) [GET]
  [4;35;1mBooking Load (2.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 94ms (View: 53, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:04:40) [GET]
  [4;35;1mBooking Load (2.4ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m

ActionView::TemplateError (wrong number of arguments (1 for 0)) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort(:priced_item.id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (117.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:10:22) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (wrong argument type Fixnum (expected Proc)) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort_by(&:priced_item.id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (119.3ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:10:34) [GET]
  [4;36;1mBooking Load (2.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m

ActionView::TemplateError (undefined method `<=>' for "#<PricedItem:0xb70baed4>":PricedItem) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort_by(&:priced_item).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (68.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:10:45) [GET]
  [4;35;1mBooking Load (1.9ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (undefined local variable or method `priced_item' for #<ActionView::Base:0xb6eeb054>) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort_by(priced_item.id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (58.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 16:10:50) [GET]
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.7ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m

ActionView::TemplateError (wrong number of arguments (1 for 0)) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort_by(:priced_item.id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (123.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:34:37) [GET]
  [4;36;1mBooking Load (0.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (undefined method `sorted_bi' for #<Booking:0xb7024df8>) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (115.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:35:05) [GET]

SyntaxError (/home/steph/Sites/RailsDev/simplebooker/app/models/booking.rb:4: syntax error, unexpected tASSOC
... has_many :sorted_bi, class => "BookingItems", :order => pri...
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/models/booking.rb:4: syntax error, unexpected ',', expecting kEND
...d_bi, class => "BookingItems", :order => priced_item.item_ty...
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/models/booking.rb:7: syntax error, unexpected kDO_BLOCK, expecting kEND
    booking_item_attributes.each do |attributes|
                                   ^
/home/steph/Sites/RailsDev/simplebooker/app/models/booking.rb:15: syntax error, unexpected kDO_BLOCK, expecting kEND
    booking_items.reject(&:new_record?).each do |booking_item|
                                               ^
/home/steph/Sites/RailsDev/simplebooker/app/models/booking.rb:23: syntax error, unexpected kEND, expecting $end):
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (51.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:35:26) [GET]
  [4;35;1mSQL (1.1ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb6f85d34>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (130.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:36:42) [GET]
  [4;35;1mSQL (1.9ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb70b392c>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (47.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:36:47) [GET]
  [4;35;1mSQL (2.1ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb6f4b698>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (105.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:36:48) [GET]
  [4;35;1mSQL (2.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb7068c38>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (48.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:37:12) [GET]
  [4;35;1mSQL (2.1ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb6f232ec>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (130.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:37:25) [GET]
  [4;35;1mSQL (1.7ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb703db14>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (66.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:37:37) [GET]
  [4;35;1mSQL (1.8ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb6efea00>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (50.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:38:26) [GET]
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #10 of app/views/bookings/index.html.erb:
7:     <th>Accommodation</th>
8:   </tr>
9: 
10: <% @bookings.each do |booking| %>
11:   <tr>
12:     <td><%= booking.arrival.strftime("%A,<br/>%d %b %y") %></td>
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>

    app/views/bookings/index.html.erb:10

Rendered rescues/_trace (92.8ms)
Rendered rescues/_request_and_response (1.1ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:38:49) [GET]
  [4;35;1mSQL (1.6ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb71206bc>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (54.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:39:05) [GET]
  [4;35;1mSQL (0.9ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `item_type' for #<Class:0xb6f8d034>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (109.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:39:20) [GET]

NoMethodError (undefined method `item_type' for :priced_item:Symbol):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (49.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:39:55) [GET]
  [4;35;1mSQL (2.0ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb6f7685c>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (106.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:40:18) [GET]
  [4;35;1mSQL (2.0ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `arrival' for #<Class:0xb70aa368>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (48.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:40:35) [GET]
  [4;35;1mSQL (0.8ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `booking_items' for #<Class:0xb6f3d098>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (107.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:40:46) [GET]

NameError (uninitialized constant Booking::BookingItems):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (65.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:41:11) [GET]
  [4;35;1mSQL (1.0ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NoMethodError (undefined method `BookingItems' for #<Class:0xb6f0cb14>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (128.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:41:44) [GET]
  [4;35;1mSQL (1.6ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb7026fb8>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (72.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:41:59) [GET]

NoMethodError (undefined method `item_type' for :priced_item:Symbol):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (49.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:42:14) [GET]
  [4;35;1mSQL (1.6ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item_id' for #<Class:0xb6fe42a8>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (51.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:44:29) [GET]
  [4;35;1mBooking Load (1.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (uninitialized constant Booking::BookingItems) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (63.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (1.0ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (1.0ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;35;1mBookingItem Load (0.8ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mPricedItem Load (0.9ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mBookingItem Load (0.9ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) LIMIT 1[0m
  [4;36;1mPricedItem Load (0.7ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mItemType Load (0.9ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:47:36) [GET]
  [4;36;1mBooking Load (2.4ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (uninitialized constant Booking::BookingItems) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (131.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:47:37) [GET]
  [4;35;1mBooking Load (1.2ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (uninitialized constant Booking::BookingItems) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (124.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:47:54) [GET]
  [4;36;1mBooking Load (2.3ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.0ms)[0m   [0mSQLite3::SQLException: no such column: priced_item.item_type.total: SELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) ORDER BY priced_item.item_type.total[0m

ActionView::TemplateError (SQLite3::SQLException: no such column: priced_item.item_type.total: SELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9)  ORDER BY priced_item.item_type.total) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
    /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (122.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:48:30) [GET]
  [4;36;1mBooking Load (1.2ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.0ms)[0m   [0mSQLite3::SQLException: near ".": syntax error: SELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) ORDER BY booking_item.priced_item.item_type.total[0m

ActionView::TemplateError (SQLite3::SQLException: near ".": syntax error: SELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9)  ORDER BY booking_item.priced_item.item_type.total) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sorted_bi.each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
    /var/lib/gems/1.8/gems/lexrupy-rails-footnotes-3.4.1/lib/rails-footnotes/notes/queries_note.rb:104:in `execute'
    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (71.2ms)
Rendered rescues/_request_and_response (0.7ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:48:54) [GET]
  [4;36;1mSQL (1.9ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (1.3ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item' for #<Class:0xb711bab8>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (55.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:49:16) [GET]
  [4;36;1mSQL (1.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (1.0ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_items' for #<Class:0xb6f8c594>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (103.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:49:30) [GET]
  [4;36;1mSQL (0.7ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_items_id' for #<Class:0xb70e44b4>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (51.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 17:49:41) [GET]
  [4;36;1mSQL (1.6ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.9ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m

NameError (undefined local variable or method `priced_item_id' for #<Class:0xb6f771e4>):
  app/models/booking.rb:4
  app/controllers/bookings_controller.rb:5:in `index'

Rendered rescues/_trace (136.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:05:33) [GET]
  [4;36;1mBooking Load (2.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (undefined local variable or method `priced_items_id' for #<ActionView::Base:0xb70c84f8>) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sort_by(priced_items_id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (56.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:05:49) [GET]
  [4;35;1mBooking Load (0.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (undefined local variable or method `priced_items_id' for #<ActionView::Base:0xb6ede200>) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sort_by(&priced_items_id).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (56.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:06:31) [GET]
  [4;36;1mBooking Load (1.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
ERROR: compiling _run_erb_app47views47bookings47index46html46erb RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected tAMPER, expecting '}'
;  booking.sort_by({&priced_item}).each do |bi| ; @...
                     ^
Function body:           def _run_erb_app47views47bookings47index46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Listing bookings</h1>\n\n<table>\n  <tr>\n    <th>Arrival</th>\n    <th>Departure</th>\n    <th>Accommodation</th>\n  </tr>\n\n"








;  @bookings.each do |booking| ; @output_buffer.concat "\n  <tr>\n    <td>"

; @output_buffer.concat(( booking.arrival.strftime("%A,<br/>%d %b %y") ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( booking.departure.strftime("%A,<br/>%d %b %y") ).to_s); @output_buffer.concat "</td>\n    <td>\n    <ul>\n    "


;  booking.sort_by({&priced_item}).each do |bi| ; @output_buffer.concat "\n    <li>"
; @output_buffer.concat((h bi.quantity ).to_s); @output_buffer.concat " x "; @output_buffer.concat((h bi.priced_item.name ).to_s); @output_buffer.concat "</li>\n    "
;  end ; @output_buffer.concat "\n    </ul>\n    </td>\n    <td>"


; @output_buffer.concat(( link_to 'Show', booking ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( link_to 'Edit', edit_booking_path(booking) ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( link_to 'Destroy', booking, :confirm => 'Are you sure?', :method => :delete ).to_s); @output_buffer.concat "</td>\n  </tr>\n"

;  end ; @output_buffer.concat "\n</table>\n\n<br />\n\n"




; @output_buffer.concat(( link_to 'New booking', new_booking_path ).to_s); @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:34:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:7:in `index'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected tAMPER, expecting '}'
;  booking.sort_by({&priced_item}).each do |bi| ; @...
                     ^) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sort_by({&priced_item}).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:34:in `compile!'
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (127.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:07:00) [GET]
  [4;35;1mBooking Load (2.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index

ActionView::TemplateError (undefined local variable or method `priced_items' for #<ActionView::Base:0xb709925c>) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.sort_by(&priced_items).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:16
    app/views/bookings/index.html.erb:10:in `each'
    app/views/bookings/index.html.erb:10
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (56.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:10:22) [GET]
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
ERROR: compiling _run_erb_app47views47bookings47index46html46erb RAISED compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected '|', expecting '}'
...king.booking_items.sort_by({ |i| i[:priced_item_id] }).each ...
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected '}', expecting kEND
..._by({ |i| i[:priced_item_id] }).each do |bi| ; @output_buffe...
                              ^
Function body:           def _run_erb_app47views47bookings47index46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Listing bookings</h1>\n\n<table>\n  <tr>\n    <th>Arrival</th>\n    <th>Departure</th>\n    <th>Accommodation</th>\n  </tr>\n\n"








;  @bookings.each do |booking| ; @output_buffer.concat "\n  <tr>\n    <td>"

; @output_buffer.concat(( booking.arrival.strftime("%A,<br/>%d %b %y") ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( booking.departure.strftime("%A,<br/>%d %b %y") ).to_s); @output_buffer.concat "</td>\n    <td>\n    <ul>\n    "


;  booking.booking_items.sort_by({ |i| i[:priced_item_id] }).each do |bi| ; @output_buffer.concat "\n    <li>"
; @output_buffer.concat((h bi.quantity ).to_s); @output_buffer.concat " x "; @output_buffer.concat((h bi.priced_item.name ).to_s); @output_buffer.concat "</li>\n    "
;  end ; @output_buffer.concat "\n    </ul>\n    </td>\n    <td>"


; @output_buffer.concat(( link_to 'Show', booking ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( link_to 'Edit', edit_booking_path(booking) ).to_s); @output_buffer.concat "</td>\n    <td>"
; @output_buffer.concat(( link_to 'Destroy', booking, :confirm => 'Are you sure?', :method => :delete ).to_s); @output_buffer.concat "</td>\n  </tr>\n"

;  end ; @output_buffer.concat "\n</table>\n\n<br />\n\n"




; @output_buffer.concat(( link_to 'New booking', new_booking_path ).to_s); @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:34:in `compile!'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:61:in `compile'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/renderable.rb:28:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/template.rb:199:in `render_template'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:260:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:343:in `_render_with_layout'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_view/base.rb:257:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1246:in `render_for_file'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:947:in `render_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:51:in `render'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:135:in `custom'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:179:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `each'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:173:in `respond'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/mime_responds.rb:107:in `respond_to'
/home/steph/Sites/RailsDev/simplebooker/app/controllers/bookings_controller.rb:7:in `index'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:1327:in `perform_action_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:617:in `call_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/var/lib/gems/1.8/gems/activesupport-2.3.3/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/flash.rb:146:in `perform_action'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `send'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:527:in `process_without_filters'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/filters.rb:606:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:391:in `process'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/base.rb:386:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/routing/route_set.rb:434:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:88:in `dispatch'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:111:in `_call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:82:in `initialize'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:29:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:9:in `cache'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/query_cache.rb:28:in `call'
/var/lib/gems/1.8/gems/activerecord-2.3.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/head.rb:9:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/methodoverride.rb:24:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/params_parser.rb:15:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/session/cookie_store.rb:93:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/reloader.rb:29:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/failsafe.rb:26:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `synchronize'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/lock.rb:11:in `call'
/var/lib/gems/1.8/gems/actionpack-2.3.3/lib/action_controller/dispatcher.rb:106:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/static.rb:31:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:46:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `each'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/urlmap.rb:40:in `call'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/rails/rack/log_tailer.rb:17:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/content_length.rb:13:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/chunked.rb:15:in `call'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:61:in `process'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:159:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `each'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:158:in `process_client'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:285:in `run'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `initialize'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `new'
/var/lib/gems/1.8/gems/mongrel-1.1.5/lib/mongrel.rb:268:in `run'
/var/lib/gems/1.8/gems/rack-1.0.0/lib/rack/handler/mongrel.rb:34:in `run'
/var/lib/gems/1.8/gems/rails-2.3.3/lib/commands/server.rb:111
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected '|', expecting '}'
...king.booking_items.sort_by({ |i| i[:priced_item_id] }).each ...
                              ^
/home/steph/Sites/RailsDev/simplebooker/app/views/bookings/index.html.erb:16: syntax error, unexpected '}', expecting kEND
..._by({ |i| i[:priced_item_id] }).each do |bi| ; @output_buffe...
                              ^) on line #16 of app/views/bookings/index.html.erb:
13:     <td><%= booking.departure.strftime("%A,<br/>%d %b %y") %></td>
14:     <td>
15:     <ul>
16:     <% booking.booking_items.sort_by({ |i| i[:priced_item_id] }).each do |bi| %>
17:     <li><%=h bi.quantity %> x <%=h bi.priced_item.name %></li>
18:     <% end %>
19:     </ul>

    app/views/bookings/index.html.erb:34:in `compile!'
    app/controllers/bookings_controller.rb:7:in `index'

Rendered rescues/_trace (53.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:10:40) [GET]
  [4;35;1mBooking Load (1.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
Completed in 124ms (View: 40, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 18:11:07) [GET]
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.6ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.7ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (51.1ms)
Completed in 113ms (View: 51, DB: 4) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:17:57) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"9", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
Rendering template within layouts/application
Rendering bookings/new

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #12 of app/views/bookings/_form.html.erb:
9:     <%= f.date_select :departure, :order => [:day,:month,:year], :start_year => Date.today.year, :end_year => Date.today.year + 3 %>
10:   </p>
11: 
12:   <% @priced_items.each do |priced_item| %>
13:     <% pass_coll = @booking.booking_items.find_by_priced_item_id(priced_item) %>
14:     <% pass_coll ||= @booking.booking_items.build() %>
15:     <%= render :partial => "booking_item", :locals => { :booking_item => pass_coll, :priced_item => priced_item }  %>

    app/views/bookings/_form.html.erb:12
    app/views/bookings/new.html.erb:4
    app/views/bookings/new.html.erb:3
    app/controllers/bookings_controller.rb:54:in `create'
    app/controllers/bookings_controller.rb:48:in `create'

Rendered rescues/_trace (78.6ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#create (for 127.0.0.1 at 2009-08-09 18:21:21) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"9", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}

NameError (undefined local variable or method `find_priced_items' for BookingsController:Class):
  app/controllers/bookings_controller.rb:3

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.7ms)
Rendering rescues/layout (internal_server_error)


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:22:01) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"9", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (1.2ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.7ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.6ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (53.1ms)
Completed in 87ms (View: 53, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:22:12) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (2.5ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.3ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (62.6ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.7ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (111.8ms)
Completed in 157ms (View: 112, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:22:19) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"7", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (3.0ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.2ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (48.9ms)
Completed in 93ms (View: 49, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:23:23) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"7", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (1.2ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.3ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (47.4ms)
Completed in 88ms (View: 47, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:23:27) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"7", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0"}, {"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (2.9ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (8.9ms)
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (61.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (123.4ms)
Completed in 209ms (View: 126, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:23:34) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"7", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0"}, {"quantity"=>"1", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (2.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (44.1ms)
Completed in 114ms (View: 44, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:23:38) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"7", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"7", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"3", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (1.2ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.6ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (45.7ms)
Completed in 86ms (View: 46, DB: 4) | 200 OK [http://localhost/bookings]


Processing BookingsController#edit (for 127.0.0.1 at 2009-08-09 18:24:04) [GET]
  Parameters: {"id"=>"12"}
  [4;35;1mPricedItem Load (2.5ms)[0m   [0mSELECT * FROM "priced_items" [0m
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.4ms)
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (9.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (106.3ms)
Completed in 149ms (View: 98, DB: 15) | 200 OK [http://localhost/bookings/12/edit]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 18:24:11) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"12", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"15", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"15", "existing_booking_item_attributes"=>{"26"=>{"quantity"=>"1", "priced_item_id"=>"1"}, "27"=>{"quantity"=>"1", "priced_item_id"=>"2"}}, "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (2.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
  [4;36;1mBooking Load (0.5ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.4ms)
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.2ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (45.5ms)
Completed in 112ms (View: 46, DB: 6) | 200 OK [http://localhost/bookings/12]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 18:24:16) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"12", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"15", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"15", "existing_booking_item_attributes"=>{"26"=>{"quantity"=>"1", "priced_item_id"=>"1"}, "27"=>{"quantity"=>"0", "priced_item_id"=>"2"}}, "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (1.0ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mBookingItem Update (0.3ms)[0m   [0mUPDATE "booking_items" SET booking_id = NULL WHERE (booking_id = 12 AND id IN (27)) [0m
Rendering template within layouts/application
Rendering bookings/edit
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.4ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = 12) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (46.5ms)
Completed in 105ms (View: 48, DB: 5) | 200 OK [http://localhost/bookings/12]


Processing BookingsController#update (for 127.0.0.1 at 2009-08-09 18:24:23) [PUT]
  Parameters: {"commit"=>"Update", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "id"=>"12", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"19", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"15", "existing_booking_item_attributes"=>{"26"=>{"quantity"=>"1", "priced_item_id"=>"1"}}, "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0"}, {"quantity"=>"1", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (3.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
  [4;35;1mBooking Load (0.3ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mBookingItem Create (0.3ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 17:24:23', 1, '2009-08-09 17:24:23', 12, 3)[0m
Redirected to http://localhost:3000/bookings/12
Completed in 58ms (DB: 4) | 302 Found [http://localhost/bookings/12]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 18:24:23) [GET]
  Parameters: {"id"=>"12"}
  [4;36;1mBooking Load (0.3ms)[0m   [0;1mSELECT * FROM "bookings" WHERE ("bookings"."id" = 12) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Completed in 100ms (View: 25, DB: 2) | 200 OK [http://localhost/bookings/12]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:24:26) [GET]
  [4;36;1mBooking Load (1.8ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.8ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Completed in 114ms (View: 72, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 18:27:02) [GET]
  [4;36;1mPricedItem Load (2.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (61.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.7ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.2ms)
Rendered bookings/_form (100.3ms)
Completed in 159ms (View: 100, DB: 5) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:27:04) [GET]
  [4;35;1mBooking Load (2.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Completed in 77ms (View: 38, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:27:09) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"9", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (2.6ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (10.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.6ms)
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (110.7ms)
Completed in 188ms (View: 112, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:29:00) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"9", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (2.5ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.5ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (46.8ms)
Completed in 171ms (View: 47, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:35:38) [GET]
  [4;35;1mBooking Load (1.8ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (1.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
Completed in 116ms (View: 72, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 18:35:41) [GET]
  [4;35;1mPricedItem Load (1.1ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (8.7ms)
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (59.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (100.8ms)
Completed in 136ms (View: 101, DB: 3) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:35:45) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"9", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"18", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"0", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;36;1mPricedItem Load (9.1ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.4ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.2ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.0ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.1ms)
Rendered bookings/_form (42.6ms)
Completed in 100ms (View: 43, DB: 11) | 200 OK [http://localhost/bookings]


Processing BookingsController#create (for 127.0.0.1 at 2009-08-09 18:35:59) [POST]
  Parameters: {"commit"=>"Create", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "booking"=>{"departure(1i)"=>"2009", "departure(2i)"=>"8", "departure(3i)"=>"20", "arrival(1i)"=>"2009", "arrival(2i)"=>"8", "arrival(3i)"=>"18", "new_booking_item_attributes"=>[{"quantity"=>"0", "priced_item_id"=>"1"}, {"quantity"=>"0"}, {"quantity"=>"1", "priced_item_id"=>"2"}, {"quantity"=>"0", "priced_item_id"=>"3"}, {"quantity"=>"6", "priced_item_id"=>"4"}, {"quantity"=>"0", "priced_item_id"=>"5"}]}}
  [4;35;1mPricedItem Load (2.8ms)[0m   [0mSELECT * FROM "priced_items" [0m
  [4;36;1mBooking Create (0.4ms)[0m   [0;1mINSERT INTO "bookings" ("departure", "created_at", "updated_at", "arrival") VALUES('2009-08-20', '2009-08-09 17:35:59', '2009-08-09 17:35:59', '2009-08-18')[0m
  [4;35;1mBookingItem Create (0.2ms)[0m   [0mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 17:35:59', 1, '2009-08-09 17:35:59', 13, 2)[0m
  [4;36;1mBookingItem Create (0.1ms)[0m   [0;1mINSERT INTO "booking_items" ("created_at", "quantity", "updated_at", "booking_id", "priced_item_id") VALUES('2009-08-09 17:35:59', 6, '2009-08-09 17:35:59', 13, 4)[0m
Redirected to http://localhost:3000/bookings/13
Completed in 112ms (DB: 3) | 302 Found [http://localhost/bookings]


Processing BookingsController#show (for 127.0.0.1 at 2009-08-09 18:35:59) [GET]
  Parameters: {"id"=>"13"}
  [4;35;1mBooking Load (0.4ms)[0m   [0mSELECT * FROM "bookings" WHERE ("bookings"."id" = 13) [0m
Rendering template within layouts/application
Rendering bookings/show
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.5ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 44ms (View: 25, DB: 2) | 200 OK [http://localhost/bookings/13]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:36:02) [GET]
  [4;35;1mBooking Load (2.1ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.3ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 87ms (View: 47, DB: 6) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 18:39:53) [GET]
  [4;36;1mPricedItem Load (1.2ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (9.4ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (3.3ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.4ms)
Rendered bookings/_form (46.4ms)
Completed in 83ms (View: 47, DB: 4) | 200 OK [http://localhost/bookings/new]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 18:47:23) [GET]
  [4;35;1mBooking Load (1.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;36;1mBookingItem Load (0.8ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;36;1mBookingItem Load (0.7ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 133ms (View: 45, DB: 5) | 200 OK [http://localhost/bookings]


Processing BookingsController#new (for 127.0.0.1 at 2009-08-09 18:48:00) [GET]
  [4;36;1mPricedItem Load (1.3ms)[0m   [0;1mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering bookings/new
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered bookings/_booking_item (8.8ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered bookings/_booking_item (3.1ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mItemType Load (0.3ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (2.9ms)
  [4;35;1mBookingItem Load (0.2ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered bookings/_booking_item (1.3ms)
Rendered bookings/_form (43.6ms)
Completed in 79ms (View: 44, DB: 4) | 200 OK [http://localhost/bookings/new]


Processing Admin::BookingsController#index (for 127.0.0.1 at 2009-08-09 19:02:56) [GET]
  [4;35;1mBooking Load (1.0ms)[0m   [0mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering admin/bookings/index
  [4;36;1mBookingItem Load (0.6ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m

ActionView::TemplateError (undefined method `admin_booking' for #<ActionView::Base:0xb719e800>) on line #23 of app/views/admin/bookings/index.html.erb:
20:     </td>
21:     <td><%= link_to 'Show', admin_booking_path(booking) %></td>
22:     <td><%= link_to 'Edit', edit_admin_booking_path(booking) %></td>
23:     <td><%= link_to 'Destroy', admin_booking(booking), :confirm => 'Are you sure?', :method => :delete %></td>
24:   </tr>
25: <% end %>
26: </table>

    app/views/admin/bookings/index.html.erb:23
    app/views/admin/bookings/index.html.erb:10:in `each'
    app/views/admin/bookings/index.html.erb:10
    app/controllers/admin/bookings_controller.rb:11:in `index'

Rendered rescues/_trace (55.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::BookingsController#index (for 127.0.0.1 at 2009-08-09 19:03:26) [GET]
  [4;36;1mBooking Load (2.0ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering admin/bookings/index
  [4;35;1mBookingItem Load (2.1ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.5ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 180ms (View: 141, DB: 7) | 200 OK [http://localhost/admin/bookings]


Processing Admin::BookingsController#new (for 127.0.0.1 at 2009-08-09 19:08:07) [GET]
  [4;35;1mPricedItem Load (2.7ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered admin/bookings/_booking_item (9.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered admin/bookings/_booking_item (2.8ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.5ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered admin/bookings/_booking_item (3.3ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered admin/bookings/_booking_item (3.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered admin/bookings/_booking_item (1.1ms)
Rendered admin/bookings/_form (48.6ms)
Completed in 186ms (View: 57, DB: 5) | 200 OK [http://localhost/admin/bookings/new]


Processing Admin::BookingsController#index (for 127.0.0.1 at 2009-08-09 19:08:10) [GET]
  [4;36;1mBooking Load (2.3ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering admin/bookings/index
  [4;35;1mBookingItem Load (1.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.9ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.8ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.8ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.4ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;36;1mBookingItem Load (0.5ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 127ms (View: 85, DB: 9) | 200 OK [http://localhost/admin/bookings]


Processing Admin::BookingsController#new (for 127.0.0.1 at 2009-08-09 19:09:41) [GET]
  [4;35;1mPricedItem Load (3.1ms)[0m   [0mSELECT * FROM "priced_items" [0m
Rendering template within layouts/application
Rendering admin/bookings/new
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 1) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 1) [0m
Rendered admin/bookings/_booking_item (9.0ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 2) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 2) [0m
Rendered admin/bookings/_booking_item (2.9ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 3) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.4ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 3) [0m
Rendered admin/bookings/_booking_item (56.2ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 4) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mItemType Load (0.3ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered admin/bookings/_booking_item (3.5ms)
  [4;36;1mBookingItem Load (0.2ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items"."priced_item_id" = 5) AND ("booking_items".booking_id = NULL) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "item_types" WHERE ("item_types"."id" = 4) [0m
Rendered admin/bookings/_booking_item (1.3ms)
Rendered admin/bookings/_form (113.3ms)
Completed in 185ms (View: 116, DB: 5) | 200 OK [http://localhost/admin/bookings/new]


Processing Admin::BookingsController#index (for 127.0.0.1 at 2009-08-09 19:09:46) [GET]
  [4;36;1mBooking Load (2.1ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering admin/bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.4ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 83ms (View: 43, DB: 6) | 200 OK [http://localhost/admin/bookings]


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:39:32) [GET]

NameError (uninitialized constant User::Authentication):
  app/models/user.rb:4
  app/controllers/users_controller.rb:12:in `new'

Rendered rescues/_trace (48.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.9ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateBookings (20090807134934)
Migrating to CreateBookingItems (20090807141237)
Migrating to CreatePricedItems (20090807141552)
Migrating to CreateItemTypes (20090807142132)
Migrating to CreateUsers (20090809182958)
  [4;36;1mSQL (0.2ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "login" varchar(40), "firstname" varchar(100) DEFAULT '', "surname" varchar(100) DEFAULT '', "email" varchar(100), "crypted_password" varchar(40), "salt" varchar(40), "created_at" datetime, "updated_at" datetime, "remember_token" varchar(40), "remember_token_expires_at" datetime, "activation_code" varchar(40), "activated_at" datetime, "state" varchar(255) DEFAULT 'passive', "deleted_at" datetime) [0m
  [4;35;1mSQL (2.1ms)[0m   [0mCREATE UNIQUE INDEX "index_users_on_login" ON "users" ("login")[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090809182958')[0m
  [4;35;1mSQL (0.5ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.4ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("booking_items")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("bookings")[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mPRAGMA index_list("item_types")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_list("priced_items")[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mPRAGMA index_list("users")[0m
  [4;35;1mSQL (0.1ms)[0m   [0mPRAGMA index_info('index_users_on_login')[0m


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:39:47) [GET]

NameError (uninitialized constant User::Authentication):
  app/models/user.rb:4
  app/controllers/users_controller.rb:12:in `new'

Rendered rescues/_trace (106.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:42:03) [GET]

NameError (uninitialized constant Authorization::AasmRoles::AASM):
  app/models/user.rb:7:in `include'
  app/models/user.rb:7
  app/controllers/users_controller.rb:12:in `new'

Rendered rescues/_trace (113.7ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:43:40) [GET]

NameError (uninitialized constant Authorization::AasmRoles::AASM):
  app/models/user.rb:7:in `include'
  app/models/user.rb:7
  app/controllers/users_controller.rb:12:in `new'

Rendered rescues/_trace (51.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:43:43) [GET]

NameError (uninitialized constant Authorization::AasmRoles::AASM):
  app/models/user.rb:7:in `include'
  app/models/user.rb:7
  app/controllers/users_controller.rb:12:in `new'

Rendered rescues/_trace (107.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing UsersController#new (for 127.0.0.1 at 2009-08-09 19:44:57) [GET]
Rendering template within layouts/application
Rendering users/new
Completed in 45ms (View: 16, DB: 0) | 200 OK [http://localhost/signup]


Processing UsersController#create (for 127.0.0.1 at 2009-08-09 19:45:24) [POST]
  Parameters: {"commit"=>"Sign up", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "user"=>{"password_confirmation"=>"cuthbert", "firstname"=>"Steph", "password"=>"cuthbert", "surname"=>"Tyszka", "login"=>"bootsa", "email"=>"bootsa@orange.net"}}
WARNING: Can't mass-assign these protected attributes: firstname, surname
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."login" = 'bootsa') LIMIT 1[0m

NoMethodError (undefined method `name' for #<User:0xb715b514>):
  app/controllers/users_controller.rb:18:in `create'

Rendered rescues/_trace (56.9ms)
Rendered rescues/_request_and_response (1.6ms)
Rendering rescues/layout (internal_server_error)


Processing UsersController#create (for 127.0.0.1 at 2009-08-09 19:48:05) [POST]
  Parameters: {"commit"=>"Sign up", "authenticity_token"=>"uP/rWXNZLkywNqueEcRamMcNbOGhKLi4CFlIex1f+5g=", "user"=>{"password_confirmation"=>"cuthbert", "firstname"=>"Steph", "password"=>"cuthbert", "surname"=>"Tyszka", "login"=>"bootsa", "email"=>"bootsa@orange.net"}}
WARNING: Can't mass-assign these protected attributes: firstname, surname
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."login" = 'bootsa') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."email" = 'bootsa@orange.net') LIMIT 1[0m
  [4;35;1mUser Create (0.7ms)[0m   [0mINSERT INTO "users" ("salt", "created_at", "activated_at", "crypted_password", "remember_token_expires_at", "updated_at", "deleted_at", "activation_code", "firstname", "remember_token", "login", "surname", "email", "state") VALUES('c7ae288f7fb41756b48d5ff31eec9bef966e6ec9', '2009-08-09 18:48:05', NULL, '565ddcbe96a582aec41dc6bc0359bb3e077ceec6', NULL, '2009-08-09 18:48:05', NULL, 'd05aaef6dba1b1682290d7fd0b9386a49e85e405', '', NULL, 'bootsa', '', 'bootsa@orange.net', 'pending')[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."login" = 'bootsa' AND "users".id <> 1) LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT "users".id FROM "users" WHERE ("users"."email" = 'bootsa@orange.net' AND "users".id <> 1) LIMIT 1[0m
Redirected to http://localhost:3000/
Completed in 86ms (DB: 2) | 302 Found [http://localhost/users]


Processing BookingsController#index (for 127.0.0.1 at 2009-08-09 19:48:05) [GET]
  [4;36;1mBooking Load (0.9ms)[0m   [0;1mSELECT * FROM "bookings" [0m
Rendering template within layouts/application
Rendering bookings/index
  [4;35;1mBookingItem Load (0.6ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 9) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.3ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 11) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 5) [0m
  [4;35;1mBookingItem Load (0.4ms)[0m   [0mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 12) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 1) [0m
  [4;35;1mPricedItem Load (0.3ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 3) [0m
  [4;36;1mBookingItem Load (0.4ms)[0m   [0;1mSELECT * FROM "booking_items" WHERE ("booking_items".booking_id = 13) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 2) [0m
  [4;36;1mPricedItem Load (0.3ms)[0m   [0;1mSELECT * FROM "priced_items" WHERE ("priced_items"."id" = 4) [0m
Completed in 83ms (View: 50, DB: 4) | 200 OK [http://localhost/]


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-09 19:58:02) [GET]

ActionController::RoutingError (No route matches "/admin/users" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 19:58:28) [GET]

NameError (uninitialized constant Admin::UsersController::Users):
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (41.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 19:58:49) [GET]
  Parameters: {"id"=>"index"}

NameError (undefined local variable or method `user' for #<Admin::UsersController:0xb702c094>):
  app/controllers/admin/users_controller.rb:17:in `show'

Rendered rescues/_trace (106.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ApplicationController#index (for 127.0.0.1 at 2009-08-09 19:59:14) [GET]

ActionController::RoutingError (No route matches "/admin/user" with {:method=>:get}):
  

Rendering rescues/layout (not_found)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:00:34) [GET]

NameError (uninitialized constant Admin::UsersController::Users):
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (50.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:01:30) [GET]

NameError (uninitialized constant Admin::UsersController::Users):
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (114.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:02:17) [GET]

NameError (uninitialized constant Admin::UsersController::Users):
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (41.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:02:23) [GET]
Rendering template within layouts/application
Rendering admin/users/index

ActionView::TemplateError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each) on line #10 of app/views/admin/users/index.html.erb:
7:     <th>Email</th>
8:   </tr>
9: 
10: <% @users.each do |user| %>
11:   <tr>
12:     <td><%= user.firstname %> <%= user.surname %></td>
13:     <td><%= user.login %></td>

    app/views/admin/users/index.html.erb:10

Rendered rescues/_trace (108.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:02:32) [GET]

NameError (uninitialized constant Admin::UsersController::Users):
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (45.1ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:02:49) [GET]
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" [0m
Rendering template within layouts/application
Rendering admin/users/index
Completed in 156ms (View: 9, DB: 1) | 200 OK [http://localhost/admin/users]


Processing Admin::UsersController#edit (for 127.0.0.1 at 2009-08-09 20:03:14) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (0.5ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/edit

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #3 of app/views/admin/users/edit.html.erb:
1: <h1>Editing booking</h1>
2: 
3: <% form_for([:admin, @booking]) do |f| %>
4:   <%= render :partial => "form", :locals => { :f => f, :button_text => "Update" } %>
5: <% end %>
6: 

    app/views/admin/users/edit.html.erb:3

Rendered rescues/_trace (51.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#edit (for 127.0.0.1 at 2009-08-09 20:08:07) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/edit
Rendered admin/users/_form (6.2ms)
Completed in 93ms (View: 16, DB: 1) | 200 OK [http://localhost/admin/users/1/edit]


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:08:14) [GET]
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM "users" [0m
Rendering template within layouts/application
Rendering admin/users/index
Completed in 88ms (View: 7, DB: 1) | 200 OK [http://localhost/admin/users]


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 20:08:17) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/show

ActionView::TemplateError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.arrival) on line #3 of app/views/admin/users/show.html.erb:
1: <p>
2:   <b>Arrival:</b>
3:   <%=h @booking.arrival %>
4: </p>
5: 
6: <p>

    app/views/admin/users/show.html.erb:3
    app/controllers/admin/users_controller.rb:19:in `show'

Rendered rescues/_trace (55.3ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:11:14) [GET]

NoMethodError (undefined method `firstname_regex' for Authentication:Module):
  app/models/user.rb:14
  app/controllers/admin/users_controller.rb:6:in `index'

Rendered rescues/_trace (110.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:13:01) [GET]
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM "users" [0m
Rendering template within layouts/application
Rendering admin/users/index
Completed in 91ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/users]


Processing Admin::UsersController#edit (for 127.0.0.1 at 2009-08-09 20:13:09) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/edit
Rendered admin/users/_form (4.7ms)
Completed in 173ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/users/1/edit]


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:13:12) [GET]
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM "users" [0m
Rendering template within layouts/application
Rendering admin/users/index
Completed in 107ms (View: 15, DB: 2) | 200 OK [http://localhost/admin/users]


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 20:13:17) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/show

ActionView::TemplateError (You have a nil object when you didn't expect it!
The error occurred while evaluating nil.arrival) on line #3 of app/views/admin/users/show.html.erb:
1: <p>
2:   <b>Arrival:</b>
3:   <%=h @booking.arrival %>
4: </p>
5: 
6: <p>

    app/views/admin/users/show.html.erb:3
    app/controllers/admin/users_controller.rb:19:in `show'

Rendered rescues/_trace (56.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 20:16:38) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (2.3ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/show
Completed in 140ms (View: 20, DB: 2) | 200 OK [http://localhost/admin/users/1]


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 20:16:52) [GET]
  Parameters: {"id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/show
Completed in 78ms (View: 7, DB: 0) | 200 OK [http://localhost/admin/users/1]


Processing Admin::UsersController#show (for 127.0.0.1 at 2009-08-09 20:16:59) [GET]
  Parameters: {"id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."id" = 1) [0m
Rendering template within layouts/application
Rendering admin/users/show
Completed in 80ms (View: 8, DB: 0) | 200 OK [http://localhost/admin/users/1]


Processing Admin::UsersController#index (for 127.0.0.1 at 2009-08-09 20:17:02) [GET]
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM "users" [0m
Rendering template within layouts/application
Rendering admin/users/index
Completed in 79ms (View: 8, DB: 1) | 200 OK [http://localhost/admin/users]
